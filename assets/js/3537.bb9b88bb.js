"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3537],{3537:function(t,i,n){n.r(i),n.d(i,{ColorType:function(){return cn},CrosshairMode:function(){return H},LastPriceAnimationMode:function(){return ln},LineStyle:function(){return u},LineType:function(){return o},MismatchDirection:function(){return mi},PriceLineSource:function(){return fn},PriceScaleMode:function(){return Ai},TickMarkType:function(){return un},TrackingModeExitMode:function(){return an},createChart:function(){return As},isBusinessDay:function(){return Mn},isUTCTimestamp:function(){return _n},version:function(){return Gs}});var s=n(7855);function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var h=n(4578),r={allowDownsampling:!0};var o,u,a,l=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function f(t,i){var n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(n)}function c(t,i,n,s){t.beginPath();var e=t.lineWidth%2?.5:0;t.moveTo(n,i+e),t.lineTo(s,i+e),t.stroke()}function v(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function d(t){if(void 0===t)throw new Error("Value is undefined");return t}function p(t){if(null===t)throw new Error("Value is null");return t}function m(t){return p(d(t))}(a=o||(o={}))[a.Simple=0]="Simple",a[a.WithSteps=1]="WithSteps",a[a.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(u||(u={}));var g={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function w(t){return t<0?0:t>255?255:Math.round(t)||0}function b(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var y=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,M=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,_=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,C=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function E(t){(t=t.toLowerCase())in g&&(t=g[t]);var i=C.exec(t)||_.exec(t);if(i)return[w(parseInt(i[1],10)),w(parseInt(i[2],10)),w(parseInt(i[3],10)),b(i.length<5?1:parseFloat(i[4]))];var n=M.exec(t);if(n)return[w(parseInt(n[1],16)),w(parseInt(n[2],16)),w(parseInt(n[3],16)),1];var s=y.exec(t);if(s)return[w(17*parseInt(s[1],16)),w(17*parseInt(s[2],16)),w(17*parseInt(s[3],16)),1];throw new Error("Cannot parse color: "+t)}function x(t){var i,n=E(t);return{t:"rgb("+n[0]+", "+n[1]+", "+n[2]+")",i:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var S=function(){function t(){this.h=[]}var i=t.prototype;return i.l=function(t,i,n){var s={o:t,_:i,u:!0===n};this.h.push(s)},i.p=function(t){var i=this.h.findIndex((function(i){return t===i.o}));i>-1&&this.h.splice(i,1)},i.v=function(t){this.h=this.h.filter((function(i){return i._!==t}))},i.m=function(t,i){var n=[].concat(this.h);this.h=this.h.filter((function(t){return!t.u})),n.forEach((function(n){return n.o(t,i)}))},i.g=function(){return this.h.length>0},i.M=function(){this.h=[]},t}();function F(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var e=0,h=n;e<h.length;e++){var r=h[e];for(var o in r)void 0!==r[o]&&("object"!=typeof r[o]||void 0===t[o]?t[o]=r[o]:F(t[o],r[o]))}return t}function L(t){return"number"==typeof t&&isFinite(t)}function O(t){return"number"==typeof t&&t%1==0}function T(t){return"string"==typeof t}function R(t){return"boolean"==typeof t}function I(t){var i,n,s,e=t;if(!e||"object"!=typeof e)return e;for(n in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(s=e[n],i[n]=s&&"object"==typeof s?I(s):s);return i}function D(t){return null!==t}function k(t){return null===t?void 0:t}var $="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function N(t,i,n){return void 0===i&&(i=$),(n=void 0!==n?n+" ":"")+t+"px "+i}var P=function(){function t(t){this.S={k:1,C:5,T:NaN,P:"",D:"",O:"",R:"",A:0,N:0,B:0,V:0,I:0},this.L=t}var i=t.prototype;return i.F=function(){var t=this.S,i=this.W(),n=this.j();return t.T===i&&t.D===n||(t.T=i,t.D=n,t.P=N(i,n),t.V=2.5/12*i,t.A=t.V,t.N=i/12*t.C,t.B=i/12*t.C,t.I=0),t.O=this.$(),t.R=this.H(),this.S},i.$=function(){return this.L.F().layout.textColor},i.H=function(){return this.L.U()},i.W=function(){return this.L.F().layout.fontSize},i.j=function(){return this.L.F().layout.fontFamily},t}(),V=function(){function t(){this.q=[]}var i=t.prototype;return i.Y=function(t){this.q=t},i.X=function(t,i,n,s){this.q.forEach((function(e){t.save(),e.X(t,i,n,s),t.restore()}))},t}(),B=function(){function t(){}var i=t.prototype;return i.X=function(t,i,n,s){t.save(),t.scale(i,i),this.K(t,n,s),t.restore()},i.Z=function(t,i,n,s){t.save(),t.scale(i,i),this.G(t,n,s),t.restore()},i.G=function(t,i,n){},t}(),U=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).J=null,i}(0,h.Z)(i,t);var n=i.prototype;return n.tt=function(t){this.J=t},n.K=function(t){if(null!==this.J&&null!==this.J.it){var i=this.J.it,n=this.J,s=function(s){t.beginPath();for(var e=i.to-1;e>=i.from;--e){var h=n.st[e];t.moveTo(h.nt,h.et),t.arc(h.nt,h.et,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.rt,s(n.ht+2),t.fillStyle=n.lt,s(n.ht)}},i}(B);function z(){return{st:[{nt:0,et:0,ot:0,_t:0}],lt:"",rt:"",ht:0,it:null}}var Z={from:0,to:1},j=function(){function t(t,i){this.ut=new V,this.ct=[],this.dt=[],this.ft=!0,this.L=t,this.vt=i,this.ut.Y(this.ct)}var i=t.prototype;return i.wt=function(t){var i=this.L.bt();i.length!==this.ct.length&&(this.dt=i.map(z),this.ct=this.dt.map((function(t){var i=new U;return i.tt(t),i})),this.ut.Y(this.ct)),this.ft=!0},i.gt=function(t,i,n){return this.ft&&(this.Mt(t),this.ft=!1),this.ut},i.Mt=function(t){var i=this,n=this.L.bt(),s=this.vt.St(),e=this.L.yt();n.forEach((function(n,h){var r,o=i.dt[h],u=n.kt(s);if(null!==u&&n.xt()){var a=p(n.Ct());o.lt=u.Tt,o.ht=u.ht,o.st[0]._t=u._t,o.st[0].et=n.Dt().Pt(u._t,a.Ot),o.rt=null!==(r=u.Rt)&&void 0!==r?r:i.L.At(o.st[0].et/t),o.st[0].ot=s,o.st[0].nt=e.Nt(s),o.it=Z}else o.it=null}))},t}(),W=function(){function t(t){this.Et=t}return t.prototype.X=function(t,i,n,s){if(null!==this.Et){var e=this.Et.Bt.xt,h=this.Et.Vt.xt;if(e||h){t.save();var r=Math.round(this.Et.nt*i),o=Math.round(this.Et.et*i),u=Math.ceil(this.Et.It*i),a=Math.ceil(this.Et.Lt*i);t.lineCap="butt",e&&r>=0&&(t.lineWidth=Math.floor(this.Et.Bt.Ft*i),t.strokeStyle=this.Et.Bt.O,t.fillStyle=this.Et.Bt.O,f(t,this.Et.Bt.zt),function(t,i,n,s){t.beginPath();var e=t.lineWidth%2?.5:0;t.moveTo(i+e,0),t.lineTo(i+e,s),t.stroke()}(t,r,0,a)),h&&o>=0&&(t.lineWidth=Math.floor(this.Et.Vt.Ft*i),t.strokeStyle=this.Et.Vt.O,t.fillStyle=this.Et.Vt.O,f(t,this.Et.Vt.zt),c(t,o,0,u)),t.restore()}}},t}(),A=function(){function t(t){this.ft=!0,this.Wt={Bt:{Ft:1,zt:0,O:"",xt:!1},Vt:{Ft:1,zt:0,O:"",xt:!1},It:0,Lt:0,nt:0,et:0},this.jt=new W(this.Wt),this.$t=t}var i=t.prototype;return i.wt=function(){this.ft=!0},i.gt=function(t,i){return this.ft&&(this.Mt(),this.ft=!1),this.jt},i.Mt=function(){var t=this.$t.xt(),i=p(this.$t.Ht()),n=i.Ut().F().crosshair,s=this.Wt;s.Vt.xt=t&&this.$t.qt(i),s.Bt.xt=t&&this.$t.Yt(),s.Vt.Ft=n.horzLine.width,s.Vt.zt=n.horzLine.style,s.Vt.O=n.horzLine.color,s.Bt.Ft=n.vertLine.width,s.Bt.zt=n.vertLine.style,s.Bt.O=n.vertLine.color,s.It=i.Xt(),s.Lt=i.Kt(),s.nt=this.$t.Zt(),s.et=this.$t.Gt()},t}();function G(t,i,n,s,e,h){t.fillRect(i+h,n,s-2*h,h),t.fillRect(i+h,n+e-h,s-2*h,h),t.fillRect(i,n,h,e),t.fillRect(i+s-h,n,h,e)}function X(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function J(t,i,n,s,e,h){t.save(),t.globalCompositeOperation="copy",t.fillStyle=h,t.fillRect(i,n,s,e),t.restore()}function K(t,i){return Array.isArray(t)?t.map((function(t){return 0===t?t:t+i})):t+i}function Q(t,i,n,s,e,h){var r,o,u,a;if(Array.isArray(h))if(2===h.length){var l=Math.max(0,h[0]),f=Math.max(0,h[1]);r=l,o=l,u=f,a=f}else{if(4!==h.length)throw new Error("Wrong border radius - it should be like css border radius");r=Math.max(0,h[0]),o=Math.max(0,h[1]),u=Math.max(0,h[2]),a=Math.max(0,h[3])}else{var c=Math.max(0,h);r=c,o=c,u=c,a=c}t.beginPath(),t.moveTo(i+r,n),t.lineTo(i+s-o,n),0!==o&&t.arcTo(i+s,n,i+s,n+o,o),t.lineTo(i+s,n+e-u),0!==u&&t.arcTo(i+s,n+e,i+s-u,n+e,u),t.lineTo(i+a,n+e),0!==a&&t.arcTo(i,n+e,i,n+e-a,a),t.lineTo(i,n+r),0!==r&&t.arcTo(i,n,i+r,n,r)}function q(t,i,n,s,e,h,r,o,u){if(void 0===r&&(r=0),void 0===o&&(o=0),void 0===u&&(u=""),t.save(),!r||!u||u===h)return Q(t,i,n,s,e,o),t.fillStyle=h,t.fill(),void t.restore();var a=r/2;"transparent"!==h&&(Q(t,i+r,n+r,s-2*r,e-2*r,K(o,-r)),t.fillStyle=h,t.fill()),"transparent"!==u&&(Q(t,i+a,n+a,s-r,e-r,K(o,-a)),t.lineWidth=r,t.strokeStyle=u,t.closePath(),t.stroke())}function Y(t,i,n,s,e,h,r){t.save(),t.globalCompositeOperation="copy";var o=t.createLinearGradient(0,0,0,e);o.addColorStop(0,h),o.addColorStop(1,r),t.fillStyle=o,t.fillRect(i,n,s,e),t.restore()}var H,tt=function(){function t(t,i){this.tt(t,i)}var i=t.prototype;return i.tt=function(t,i){this.Et=t,this.Jt=i},i.X=function(t,i,n,s,e,h){var r=this;if(this.Et.xt){t.font=i.P;var o=this.Qt(t,i,n,s,e,h),u=this.Et.O||this.Jt.O,a=this.Jt.t;if(t.fillStyle=this.Jt.t,this.Et.ti){var l=function(i,n){o.ii?q(t,o.si,o.ni,o.ei,o.ri,i,o.hi,[o.ht,0,0,o.ht],n):q(t,o.li,o.ni,o.ei,o.ri,i,o.hi,[0,o.ht,o.ht,0],n)};l(a,"transparent"),this.Et.ai&&(t.fillStyle=u,t.fillRect(o.li,o.oi,o._i-o.li,o.ui)),l("transparent",a),this.Et.ci&&(t.fillStyle=i.R,t.fillRect(o.ii?o.di-o.hi:0,o.ni,o.hi,o.fi-o.ni)),t.save(),t.translate(o.pi,(o.ni+o.fi)/2+o.vi),X(t,h,(function(){t.fillStyle=u,t.fillText(r.Et.ti,0,0)})),t.restore()}}},i.Kt=function(t,i){return this.Et.xt?t.T+t.V+t.A:0},i.Qt=function(t,i,n,s,e,h){var r=this.Et.ai||!this.Et.mi?i.C:0,o=i.k,u=i.V+this.Jt.wi,a=i.A+this.Jt.bi,l=i.N,f=i.B,c=this.Et.ti,v=i.T,d=n.gi(t,c)*h,p=v+u+a,m=o+l+f+Math.ceil(n.Mi(t,c))+r,g=Math.max(1,Math.floor(h)),w=Math.round(p*h);w%2!=g%2&&(w+=1);var b=this.Et.Si?Math.max(1,Math.floor(o*h)):0,y=Math.round(m*h),M=Math.round(r*h),_=Math.ceil(s*h),C=Math.ceil(l*h),E=this.Jt.yi;this.Jt.ki&&(E=this.Jt.ki),E=Math.round(E*h)-Math.floor(.5*h);var x,S,F=Math.floor(E+g/2-w/2),L=F+w,O="right"===e,T=O?_-b:b,R=_,I=T,D=2*h;return t.textAlign=O?"right":"left",t.textBaseline="middle",O?(I=T-y,x=T-M,S=T-M-C-1):(I=T+y,x=T+M,S=T+M+C),{ii:O,ni:F,oi:E,fi:L,ei:y,ri:w,ht:D,hi:b,si:I,li:T,_i:x,pi:S,ui:g,di:R,vi:d}},t}(),it=function(){function t(t){this.xi={yi:0,O:"#FFF",t:"#000",bi:0,wi:0},this.Ci={ti:"",xt:!1,ai:!0,mi:!1,Rt:"",O:"#FFF",ci:!1,Si:!1},this.Ti={ti:"",xt:!1,ai:!1,mi:!0,Rt:"",O:"#FFF",ci:!0,Si:!0},this.ft=!0,this.Pi=new(t||tt)(this.Ci,this.xi),this.Di=new(t||tt)(this.Ti,this.xi)}var i=t.prototype;return i.ti=function(){return this.Oi(),this.Ci.ti},i.yi=function(){return this.Oi(),this.xi.yi},i.wt=function(){this.ft=!0},i.Kt=function(t,i){return void 0===i&&(i=!1),Math.max(this.Pi.Kt(t,i),this.Di.Kt(t,i))},i.Ri=function(){return this.xi.ki||0},i.Ai=function(t){this.xi.ki=t},i.Ni=function(){return this.Oi(),this.Ci.xt||this.Ti.xt},i.Ei=function(){return this.Oi(),this.Ci.xt},i.gt=function(t){return this.Oi(),this.Ci.ai=this.Ci.ai&&t.F().ticksVisible,this.Ti.ai=this.Ti.ai&&t.F().ticksVisible,this.Pi.tt(this.Ci,this.xi),this.Di.tt(this.Ti,this.xi),this.Pi},i.Bi=function(){return this.Oi(),this.Pi.tt(this.Ci,this.xi),this.Di.tt(this.Ti,this.xi),this.Di},i.Oi=function(){this.ft&&(this.Ci.ai=!0,this.Ti.ai=!1,this.Vi(this.Ci,this.Ti,this.xi))},t}(),nt=function(t){function i(i,n,s){var e;return(e=t.call(this)||this).$t=i,e.Ii=n,e.Li=s,e}return(0,h.Z)(i,t),i.prototype.Vi=function(t,i,n){t.xt=!1;var s=this.$t.F().horzLine;if(s.labelVisible){var e=this.Ii.Ct();if(this.$t.xt()&&!this.Ii.Fi()&&null!==e){var h=x(s.labelBackgroundColor);n.t=h.t,n.O=h.i;var r=2/12*this.Ii.T();n.wi=r,n.bi=r;var o=this.Li(this.Ii);n.yi=o.yi,t.ti=this.Ii.zi(o._t,e),t.xt=!0}}},i}(it),st=/[1-9]/g,et=function(){function t(){this.Et=null}var i=t.prototype;return i.tt=function(t){this.Et=t},i.X=function(t,i,n){var s=this;if(null!==this.Et&&!1!==this.Et.xt&&0!==this.Et.ti.length){t.font=i.P;var e=Math.round(i.Wi.Mi(t,this.Et.ti,st));if(!(e<=0)){t.save();var h=i.ji,r=e+2*h,o=r/2,u=this.Et.Xt,a=this.Et.yi,l=Math.floor(a-o)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-o)+.5):l+r>u&&(a-=Math.abs(u-(l+r)),l=Math.floor(a-o)+.5);var f=l+r,c=Math.ceil(0+i.k+i.C+i.V+i.T+i.A);t.fillStyle=this.Et.t;var v=Math.round(l*n),d=Math.round(0*n),m=Math.round(f*n),g=Math.round(c*n),w=Math.round(2*n);if(t.beginPath(),t.moveTo(v,d),t.lineTo(v,g-w),t.arcTo(v,g,v+w,g,w),t.lineTo(m-w,g),t.arcTo(m,g,m,g-w,w),t.lineTo(m,d),t.fill(),this.Et.ai){var b=Math.round(this.Et.yi*n),y=d,M=Math.round((y+i.C)*n);t.fillStyle=this.Et.O;var _=Math.max(1,Math.floor(n)),C=Math.floor(.5*n);t.fillRect(b-C,y,_,M-y)}var E=0+i.k+i.C+i.V+i.T/2;t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.Et.O;var x=i.Wi.gi(t,"Apr0");t.translate((l+h)*n,(E+x)*n),X(t,n,(function(){return t.fillText(p(s.Et).ti,0,0)})),t.restore()}}},t}(),ht=function(){function t(t,i,n){this.ft=!0,this.jt=new et,this.Wt={xt:!1,t:"#4c525e",O:"white",ti:"",Xt:0,yi:NaN,ai:!0},this.vt=t,this.$i=i,this.Li=n}var i=t.prototype;return i.wt=function(){this.ft=!0},i.gt=function(){return this.ft&&(this.Mt(),this.ft=!1),this.jt.tt(this.Wt),this.jt},i.Mt=function(){var t=this.Wt;t.xt=!1;var i=this.vt.F().vertLine;if(i.labelVisible){var n=this.$i.yt();if(!n.Fi()){t.Xt=n.Xt();var s=this.Li();if(s.ot){t.yi=s.yi;var e=n.Hi(this.vt.St());t.ti=n.Ui(p(e)),t.xt=!0;var h=x(i.labelBackgroundColor);t.t=h.t,t.O=h.i,t.ai=n.F().ticksVisible}}}},t}(),rt=function(){function t(){this.qi=null,this.Yi=0}var i=t.prototype;return i.Xi=function(){return this.Yi},i.Ki=function(t){this.Yi=t},i.Dt=function(){return this.qi},i.Zi=function(t){this.qi=t},i.Gi=function(t){return[]},i.Ji=function(){return[]},i.xt=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(H||(H={}));var ot=function(t){function i(i,n){var s;(s=t.call(this)||this).Qi=null,s.ts=NaN,s.ss=0,s.ns=!0,s.es=new Map,s.rs=!1,s.hs=NaN,s.ls=NaN,s.os=NaN,s._s=NaN,s.$i=i,s.us=n,s.cs=new j(i,e(s)),s.ds=function(t){var i=s.ls,n=s.ts;if(t===p(s.Qi).fs())return{_t:n,yi:i};var e=p(t.Ct());return{_t:t.ps(i,e),yi:i}};var h=function(){return{ot:s.$i.yt().vs(s.ss),yi:s.Zt()}};return s.ws=new ht(e(s),i,h),s.bs=new A(e(s)),s}(0,h.Z)(i,t);var n=i.prototype;return n.F=function(){return this.us},n.gs=function(t,i){this.os=t,this._s=i},n.Ms=function(){this.os=NaN,this._s=NaN},n.Ss=function(){return this.os},n.ys=function(){return this._s},n.ks=function(t,i,n){this.rs||(this.rs=!0),this.ns=!0,this.xs(t,i,n)},n.St=function(){return this.ss},n.Zt=function(){return this.hs},n.Gt=function(){return this.ls},n.xt=function(){return this.ns},n.Cs=function(){this.ns=!1,this.Ts(),this.ts=NaN,this.hs=NaN,this.ls=NaN,this.Qi=null,this.Ms()},n.Ps=function(t){return null!==this.Qi?[this.bs,this.cs]:[]},n.qt=function(t){return t===this.Qi&&this.us.horzLine.visible},n.Yt=function(){return this.us.vertLine.visible},n.Ds=function(t,i){this.ns&&this.Qi===t||this.es.clear();var n=[];return this.Qi===t&&n.push(this.Os(this.es,i,this.ds)),n},n.Ji=function(){return this.ns?[this.ws]:[]},n.Ht=function(){return this.Qi},n.Rs=function(){this.bs.wt(),this.es.forEach((function(t){return t.wt()})),this.ws.wt(),this.cs.wt()},n.As=function(t){return t&&!t.fs().Fi()?t.fs():null},n.xs=function(t,i,n){this.Ns(t,i,n)&&this.Rs()},n.Ns=function(t,i,n){var s=this.hs,e=this.ls,h=this.ts,r=this.ss,o=this.Qi,u=this.As(n);this.ss=t,this.hs=isNaN(t)?NaN:this.$i.yt().Nt(t),this.Qi=n;var a=null!==u?u.Ct():null;return null!==u&&null!==a?(this.ts=i,this.ls=u.Pt(i,a)):(this.ts=NaN,this.ls=NaN),s!==this.hs||e!==this.ls||r!==this.ss||h!==this.ts||o!==this.Qi},n.Ts=function(){var t=this.$i.bt().map((function(t){return t.Bs().Es()})).filter(D),i=0===t.length?null:Math.max.apply(Math,t);this.ss=null!==i?i:NaN},n.Os=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new nt(this,i,n),t.set(i,s)),s},i}(rt);function ut(t){return"left"===t||"right"===t}var at=function(){function t(t){this.Vs=new Map,this.Is=[],this.Ls=t}var i=t.prototype;return i.Fs=function(t,i){var n=function(t,i){return void 0===t?i:{zs:Math.max(t.zs,i.zs),Ws:t.Ws||i.Ws}}(this.Vs.get(t),i);this.Vs.set(t,n)},i.js=function(){return this.Ls},i.$s=function(t){var i=this.Vs.get(t);return void 0===i?{zs:this.Ls}:{zs:Math.max(this.Ls,i.zs),Ws:i.Ws}},i.Hs=function(){this.Is=[{Us:0}]},i.qs=function(t){this.Is=[{Us:1,Ot:t}]},i.Ys=function(){this.Is=[{Us:4}]},i.Xs=function(t){this.Is.push({Us:2,Ot:t})},i.Ks=function(t){this.Is.push({Us:3,Ot:t})},i.Zs=function(){return this.Is},i.Gs=function(t){for(var i,n=this,e=(0,s.Z)(t.Is);!(i=e()).done;){var h=i.value;this.Js(h)}this.Ls=Math.max(this.Ls,t.Ls),t.Vs.forEach((function(t,i){n.Fs(i,t)}))},i.Js=function(t){switch(t.Us){case 0:this.Hs();break;case 1:this.qs(t.Ot);break;case 2:this.Xs(t.Ot);break;case 3:this.Ks(t.Ot);break;case 4:this.Ys()}},t}();function lt(t,i){if(!L(t))return"n/a";if(!O(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var ft=function(){function t(t,i){if(i||(i=1),L(t)&&O(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ii=t,this.Qs=i,this.tn()}var i=t.prototype;return i.format=function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.sn(t)},i.tn=function(){if(this.nn=0,this.Ii>0&&this.Qs>0)for(var t=this.Ii;t>1;)t/=10,this.nn++},i.sn=function(t){var i=this.Ii/this.Qs,n=Math.floor(t),s="",e=void 0!==this.nn?this.nn:NaN;if(i>1){var h=+(Math.round(t*i)-n*i).toFixed(this.nn);h>=i&&(h-=i,n+=1),s="."+lt(+h.toFixed(this.nn)*this.Qs,e)}else n=Math.round(n*i)/i,e>0&&(s="."+lt(0,e));return n.toFixed(0)+s},t}(),ct=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return(0,h.Z)(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(ft),vt=function(){function t(t){this.en=t}var i=t.prototype;return i.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.rn(t):t<999995?i+this.rn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.rn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.rn(t/1e9)+"B")},i.rn=function(t){var i=Math.pow(10,this.en);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.en).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function dt(t,i,n,s){if(0!==i.length){var e=i[s.from].nt,h=i[s.from].et;t.moveTo(e,h);for(var r=s.from+1;r<s.to;++r){var o=i[r];switch(n){case 0:t.lineTo(o.nt,o.et);break;case 1:t.lineTo(o.nt,i[r-1].et),t.lineTo(o.nt,o.et);break;case 2:var u=gt(i,r-1,r),a=u[0],l=u[1];t.bezierCurveTo(a.nt,a.et,l.nt,l.et,o.nt,o.et)}}}}function pt(t,i){return{nt:t.nt-i.nt,et:t.et-i.et}}function mt(t,i){return{nt:t.nt/i,et:t.et/i}}function gt(t,i,n){var s,e,h=Math.max(0,i-1),r=Math.min(t.length-1,n+1);return[(s=t[i],e=mt(pt(t[n],t[h]),6),{nt:s.nt+e.nt,et:s.et+e.et}),pt(t[n],mt(pt(t[r],t[i]),6))]}var wt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).J=null,i}(0,h.Z)(i,t);var n=i.prototype;return n.tt=function(t){this.J=t},n.K=function(t){if(null!==this.J&&0!==this.J.st.length&&null!==this.J.it){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.J.Ft,f(t,this.J.zt),t.lineWidth=1,t.beginPath(),1===this.J.st.length){var i=this.J.st[0],n=this.J.hn/2;t.moveTo(i.nt-n,this.J.ln),t.lineTo(i.nt-n,i.et),t.lineTo(i.nt+n,i.et),t.lineTo(i.nt+n,this.J.ln)}else t.moveTo(this.J.st[this.J.it.from].nt,this.J.ln),t.lineTo(this.J.st[this.J.it.from].nt,this.J.st[this.J.it.from].et),dt(t,this.J.st,this.J.an,this.J.it),this.J.it.to>this.J.it.from&&(t.lineTo(this.J.st[this.J.it.to-1].nt,this.J.ln),t.lineTo(this.J.st[this.J.it.from].nt,this.J.ln));t.closePath(),t.fillStyle=this.on(t),t.fill()}},i}(B),bt=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.on=function(t){var i=this.J,n=t.createLinearGradient(0,0,0,i._n);return n.addColorStop(0,i.un),n.addColorStop(1,i.cn),n},i}(wt),yt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).J=null,i}(0,h.Z)(i,t);var n=i.prototype;return n.tt=function(t){this.J=t},n.K=function(t){if(null!==this.J&&0!==this.J.st.length&&null!==this.J.it)if(t.lineCap="butt",t.lineWidth=this.J.Ft,f(t,this.J.zt),t.strokeStyle=this.dn(t),t.lineJoin="round",1===this.J.st.length){t.beginPath();var i=this.J.st[0];t.moveTo(i.nt-this.J.hn/2,i.et),t.lineTo(i.nt+this.J.hn/2,i.et),void 0!==i.O&&(t.strokeStyle=i.O),t.stroke()}else this.fn(t,this.J)},n.fn=function(t,i){t.beginPath(),dt(t,i.st,i.an,i.it),t.stroke()},i}(B),Mt=function(t){function i(){return t.apply(this,arguments)||this}(0,h.Z)(i,t);var n=i.prototype;return n.fn=function(t,i){var n,s,e=i.st,h=i.it,r=i.an,o=i.lt;if(0!==e.length&&null!==h){t.beginPath();var u=e[h.from];t.moveTo(u.nt,u.et);var a=null!==(n=u.O)&&void 0!==n?n:o;t.strokeStyle=a;for(var l=function(i){t.stroke(),t.beginPath(),t.strokeStyle=i,a=i},f=h.from+1;f<h.to;++f){var c=e[f],v=null!==(s=c.O)&&void 0!==s?s:o;switch(r){case 0:t.lineTo(c.nt,c.et);break;case 1:t.lineTo(c.nt,e[f-1].et),v!==a&&(l(v),t.lineTo(c.nt,e[f-1].et)),t.lineTo(c.nt,c.et);break;case 2:var d=gt(e,f-1,f),p=d[0],m=d[1];t.bezierCurveTo(p.nt,p.et,m.nt,m.et,c.nt,c.et)}1!==r&&v!==a&&(l(v),t.moveTo(c.nt,c.et))}t.stroke()}},n.dn=function(){return this.J.lt},i}(yt);function _t(t,i,n,s,e){void 0===s&&(s=0),void 0===e&&(e=t.length);for(var h=e-s;0<h;){var r=h>>1,o=s+r;n(t[o],i)?(s=o+1,h-=r+1):h=r}return s}function Ct(t,i,n,s,e){void 0===s&&(s=0),void 0===e&&(e=t.length);for(var h=e-s;0<h;){var r=h>>1,o=s+r;n(i,t[o])?h=r:(s=o+1,h-=r+1)}return s}function Et(t,i){return t.ot<i}function xt(t,i){return t<i.ot}function St(t,i,n){var s=i.pn(),e=i.vn(),h=_t(t,s,Et),r=Ct(t,e,xt);if(!n)return{from:h,to:r};var o=h,u=r;return h>0&&h<t.length&&t[h].ot>=s&&(o=h-1),r>0&&r<t.length&&t[r-1].ot<=e&&(u=r+1),{from:o,to:u}}var Ft=function(){function t(t,i,n){this.mn=!0,this.wn=!0,this.bn=!0,this.gn=[],this.Mn=null,this.Sn=t,this.yn=i,this.kn=n}var i=t.prototype;return i.wt=function(t){this.mn=!0,"data"===t&&(this.wn=!0),"options"===t&&(this.bn=!0)},i.xn=function(){this.wn&&(this.Cn(),this.wn=!1),this.mn&&(this.Tn(),this.mn=!1),this.bn&&(this.Pn(),this.bn=!1)},i.Dn=function(){this.Mn=null},i.Tn=function(){var t=this.Sn.Dt(),i=this.yn.yt();if(this.Dn(),!i.Fi()&&!t.Fi()){var n=i.On();if(null!==n&&0!==this.Sn.Bs().Rn()){var s=this.Sn.Ct();null!==s&&(this.Mn=St(this.gn,n,this.kn),this.An(t,i,s.Ot))}}},t}(),Lt=function(t){function i(i,n){return t.call(this,i,n,!0)||this}(0,h.Z)(i,t);var n=i.prototype;return n.An=function(t,i,n){i.Nn(this.gn,k(this.Mn)),t.En(this.gn,n,k(this.Mn))},n.Bn=function(t,i){return{ot:t,_t:i,nt:NaN,et:NaN}},n.Pn=function(){},n.Cn=function(){var t=this,i=this.Sn.Vn();this.gn=this.Sn.Bs().In().map((function(n){var s=n.Ot[3];return t.Ln(n.Fn,s,i)}))},i}(Ft),Ot=function(t){function i(i,n){var s;return(s=t.call(this,i,n)||this).jt=new V,s.zn=new bt,s.Wn=new Mt,s.jt.Y([s.zn,s.Wn]),s}(0,h.Z)(i,t);var n=i.prototype;return n.gt=function(t,i){if(!this.Sn.xt())return null;var n=this.Sn.F();return this.xn(),this.zn.tt({an:n.lineType,st:this.gn,zt:n.lineStyle,Ft:n.lineWidth,un:n.topColor,cn:n.bottomColor,ln:t,_n:t,it:this.Mn,hn:this.yn.yt().jn()}),this.Wn.tt({an:n.lineType,st:this.gn,lt:n.lineColor,zt:n.lineStyle,Ft:n.lineWidth,it:this.Mn,hn:this.yn.yt().jn()}),this.jt},n.Ln=function(t,i){return this.Bn(t,i)},i}(Lt),Tt=function(){function t(){this.Et=null,this.$n=0,this.Hn=0}var i=t.prototype;return i.tt=function(t){this.Et=t},i.X=function(t,i,n,s){if(null!==this.Et&&0!==this.Et.Bs.length&&null!==this.Et.it){this.$n=this.Un(i),this.$n>=2&&Math.max(1,Math.floor(i))%2!=this.$n%2&&this.$n--,this.Hn=this.Et.qn?Math.min(this.$n,Math.floor(i)):this.$n;for(var e=null,h=this.Hn<=this.$n&&this.Et.jn>=Math.floor(1.5*i),r=this.Et.it.from;r<this.Et.it.to;++r){var o=this.Et.Bs[r];e!==o.O&&(t.fillStyle=o.O,e=o.O);var u=Math.floor(.5*this.Hn),a=Math.round(o.nt*i),l=a-u,f=this.Hn,c=l+f-1,v=Math.min(o.Yn,o.Xn),d=Math.max(o.Yn,o.Xn),p=Math.round(v*i)-u,m=Math.round(d*i)+u,g=Math.max(m-p,this.Hn);t.fillRect(l,p,f,g);var w=Math.ceil(1.5*this.$n);if(h){if(this.Et.Kn){var b=a-w,y=Math.max(p,Math.round(o.Zn*i)-u),M=y+f-1;M>p+g-1&&(y=(M=p+g-1)-f+1),t.fillRect(b,y,l-b,M-y+1)}var _=a+w,C=Math.max(p,Math.round(o.Gn*i)-u),E=C+f-1;E>p+g-1&&(C=(E=p+g-1)-f+1),t.fillRect(c+1,C,_-c,E-C+1)}}}},i.Un=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(p(this.Et).jn,t)))},t}(),Rt=function(t){function i(i,n){return t.call(this,i,n,!1)||this}(0,h.Z)(i,t);var n=i.prototype;return n.An=function(t,i,n){i.Nn(this.gn,k(this.Mn)),t.Jn(this.gn,n,k(this.Mn))},n.Qn=function(t,i,n){return{ot:t,te:i.Ot[0],ie:i.Ot[1],se:i.Ot[2],ne:i.Ot[3],nt:NaN,Zn:NaN,Yn:NaN,Xn:NaN,Gn:NaN}},n.Cn=function(){var t=this,i=this.Sn.Vn();this.gn=this.Sn.Bs().In().map((function(n){return t.Ln(n.Fn,n,i)}))},i}(Ft),It=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).jt=new Tt,i}(0,h.Z)(i,t);var n=i.prototype;return n.gt=function(t,i){if(!this.Sn.xt())return null;var n=this.Sn.F();this.xn();var s={Bs:this.gn,jn:this.yn.yt().jn(),Kn:n.openVisible,qn:n.thinBars,it:this.Mn};return this.jt.tt(s),this.jt},n.Pn=function(){var t=this;this.gn.forEach((function(i){i.O=t.Sn.Vn().re(i.ot).ee}))},n.Ln=function(t,i,n){return Object.assign(Object.assign({},this.Qn(t,i,n)),{O:n.re(t).ee})},i}(Rt);function Dt(t,i,n){return Math.min(Math.max(t,i),n)}function kt(t,i,n){return i-t<=n}function $t(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function Nt(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function Pt(t){var i=Math.ceil(t);return i%2==0?i-1:i}var Vt=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.on=function(t){var i=this.J,n=t.createLinearGradient(0,0,0,i._n),s=Dt(i.ln/i._n,0,1);return n.addColorStop(0,i.he),n.addColorStop(s,i.le),n.addColorStop(s,i.ae),n.addColorStop(1,i.oe),n},i}(wt),Bt=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.dn=function(t){var i=this.J,n=t.createLinearGradient(0,0,0,i._n),s=Dt(i.ln/i._n,0,1);return n.addColorStop(0,i.un),n.addColorStop(s,i.un),n.addColorStop(s,i.cn),n.addColorStop(1,i.cn),n},i}(yt),Ut=function(t){function i(i,n){var s;return(s=t.call(this,i,n)||this)._e=new Vt,s.ue=new Bt,s.ut=new V,s.ut.Y([s._e,s.ue]),s}(0,h.Z)(i,t);var n=i.prototype;return n.gt=function(t,i){if(!this.Sn.xt())return null;var n=this.Sn.Ct();if(null===n)return null;var s=this.Sn.F();this.xn();var e=this.Sn.Dt().Pt(s.baseValue.price,n.Ot),h=this.yn.yt().jn();return this._e.tt({st:this.gn,he:s.topFillColor1,le:s.topFillColor2,ae:s.bottomFillColor1,oe:s.bottomFillColor2,Ft:s.lineWidth,zt:s.lineStyle,an:s.lineType,ln:e,_n:t,it:this.Mn,hn:h}),this.ue.tt({st:this.gn,un:s.topLineColor,cn:s.bottomLineColor,Ft:s.lineWidth,zt:s.lineStyle,an:s.lineType,ln:e,_n:t,it:this.Mn,hn:h}),this.ut},n.Ln=function(t,i){return this.Bn(t,i)},i}(Lt),zt=function(){function t(){this.Et=null,this.$n=0}var i=t.prototype;return i.tt=function(t){this.Et=t},i.X=function(t,i,n,s){if(null!==this.Et&&0!==this.Et.Bs.length&&null!==this.Et.it){this.$n=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),e=Math.floor(t*i),h=Math.min(s,e);return Math.max(Math.floor(i),h)}(this.Et.jn,i),this.$n>=2&&Math.floor(i)%2!=this.$n%2&&this.$n--;var e=this.Et.Bs;this.Et.ce&&this.de(t,e,this.Et.it,i),this.Et.ci&&this.fe(t,e,this.Et.it,this.Et.jn,i);var h=this.pe(i);(!this.Et.ci||this.$n>2*h)&&this.ve(t,e,this.Et.it,i)}},i.de=function(t,i,n,s){if(null!==this.Et){var e="",h=Math.min(Math.floor(s),Math.floor(this.Et.jn*s));h=Math.max(Math.floor(s),Math.min(h,this.$n));for(var r=Math.floor(.5*h),o=null,u=n.from;u<n.to;u++){var a=i[u];a.me!==e&&(t.fillStyle=a.me,e=a.me);var l=Math.round(Math.min(a.Zn,a.Gn)*s),f=Math.round(Math.max(a.Zn,a.Gn)*s),c=Math.round(a.Yn*s),v=Math.round(a.Xn*s),d=Math.round(s*a.nt)-r,p=d+h-1;null!==o&&(d=Math.max(o+1,d),d=Math.min(d,p));var m=p-d+1;t.fillRect(d,c,m,l-c),t.fillRect(d,f+1,m,v-f),o=p}}},i.pe=function(t){var i=Math.floor(1*t);this.$n<=2*i&&(i=Math.floor(.5*(this.$n-1)));var n=Math.max(Math.floor(t),i);return this.$n<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},i.fe=function(t,i,n,s,e){if(null!==this.Et)for(var h="",r=this.pe(e),o=null,u=n.from;u<n.to;u++){var a=i[u];a.Rt!==h&&(t.fillStyle=a.Rt,h=a.Rt);var l=Math.round(a.nt*e)-Math.floor(.5*this.$n),f=l+this.$n-1,c=Math.round(Math.min(a.Zn,a.Gn)*e),v=Math.round(Math.max(a.Zn,a.Gn)*e);if(null!==o&&(l=Math.max(o+1,l),l=Math.min(l,f)),this.Et.jn*e>2*r)G(t,l,c,f-l+1,v-c+1,r);else{var d=f-l+1;t.fillRect(l,c,d,v-c+1)}o=f}},i.ve=function(t,i,n,s){if(null!==this.Et)for(var e="",h=this.pe(s),r=n.from;r<n.to;r++){var o=i[r],u=Math.round(Math.min(o.Zn,o.Gn)*s),a=Math.round(Math.max(o.Zn,o.Gn)*s),l=Math.round(o.nt*s)-Math.floor(.5*this.$n),f=l+this.$n-1;if(o.O!==e){var c=o.O;t.fillStyle=c,e=c}this.Et.ci&&(l+=h,u+=h,f-=h,a-=h),u>a||t.fillRect(l,u,f-l+1,a-u+1)}},t}(),Zt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).jt=new zt,i}(0,h.Z)(i,t);var n=i.prototype;return n.gt=function(t,i){if(!this.Sn.xt())return null;var n=this.Sn.F();this.xn();var s={Bs:this.gn,jn:this.yn.yt().jn(),ce:n.wickVisible,ci:n.borderVisible,it:this.Mn};return this.jt.tt(s),this.jt},n.Pn=function(){var t=this;this.gn.forEach((function(i){var n=t.Sn.Vn().re(i.ot);i.O=n.ee,i.me=n.we,i.Rt=n.be}))},n.Ln=function(t,i,n){var s=n.re(t);return Object.assign(Object.assign({},this.Qn(t,i,n)),{O:s.ee,me:s.we,Rt:s.be})},i}(Rt),jt=function(){function t(){this.Et=null,this.ge=[]}var i=t.prototype;return i.tt=function(t){this.Et=t,this.ge=[]},i.X=function(t,i,n,s){if(null!==this.Et&&0!==this.Et.st.length&&null!==this.Et.it){this.ge.length||this.Me(i);for(var e=Math.max(1,Math.floor(i)),h=Math.round(this.Et.Se*i)-Math.floor(e/2),r=h+e,o=this.Et.it.from;o<this.Et.it.to;o++){var u=this.Et.st[o],a=this.ge[o-this.Et.it.from],l=Math.round(u.et*i),f=void 0,c=void 0;t.fillStyle=u.O,l<=h?(f=l,c=r):(f=h,c=l-Math.floor(e/2)+e),t.fillRect(a.pn,f,a.vn-a.pn+1,c-f)}}},i.Me=function(t){if(null!==this.Et&&0!==this.Et.st.length&&null!==this.Et.it){var i=Math.ceil(this.Et.jn*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.Et.jn*t)-i;this.ge=new Array(this.Et.it.to-this.Et.it.from);for(var s=this.Et.it.from;s<this.Et.it.to;s++){var e=this.Et.st[s],h=Math.round(e.nt*t),r=void 0,o=void 0;if(n%2){var u=(n-1)/2;r=h-u,o=h+u}else{var a=n/2;r=h-a,o=h+a-1}this.ge[s-this.Et.it.from]={pn:r,vn:o,ye:h,ke:e.nt*t,ot:e.ot}}for(var l=this.Et.it.from+1;l<this.Et.it.to;l++){var f=this.ge[l-this.Et.it.from],c=this.ge[l-this.Et.it.from-1];f.ot===c.ot+1&&f.pn-c.vn!==i+1&&(c.ye>c.ke?c.vn=f.pn-i-1:f.pn=c.vn+i+1)}for(var v=Math.ceil(this.Et.jn*t),d=this.Et.it.from;d<this.Et.it.to;d++){var p=this.ge[d-this.Et.it.from];p.vn<p.pn&&(p.vn=p.pn);var m=p.vn-p.pn+1;v=Math.min(m,v)}if(i>0&&v<4)for(var g=this.Et.it.from;g<this.Et.it.to;g++){var w=this.ge[g-this.Et.it.from];w.vn-w.pn+1>v&&(w.ye>w.ke?w.vn-=1:w.pn+=1)}}else this.ge=[]},t}();function Wt(t){return{st:[],jn:t,Se:NaN,it:null}}function At(t,i,n){return{ot:t,_t:i,nt:NaN,et:NaN,O:n}}var Gt=function(t){function i(i,n){var s;return(s=t.call(this,i,n,!1)||this).ut=new V,s.xe=Wt(0),s.jt=new jt,s}(0,h.Z)(i,t);var n=i.prototype;return n.gt=function(t,i){return this.Sn.xt()?(this.xn(),this.ut):null},n.Cn=function(){var t=this.yn.yt().jn();this.xe=Wt(t);for(var i,n=0,e=0,h=this.Sn.F().color,r=(0,s.Z)(this.Sn.Bs().In());!(i=r()).done;){var o=i.value,u=o.Ot[3],a=void 0!==o.O?o.O:h,l=At(o.Fn,u,a);++n<this.xe.st.length?this.xe.st[n]=l:this.xe.st.push(l),this.gn[e++]={ot:o.Fn,nt:0}}this.jt.tt(this.xe),this.ut.Y([this.jt])},n.Pn=function(){},n.Dn=function(){t.prototype.Dn.call(this),this.xe.it=null},n.An=function(t,i,n){if(null!==this.Mn){var s=i.jn(),e=p(i.On()),h=t.Pt(this.Sn.F().base,n);i.Nn(this.xe.st),t.En(this.xe.st,n),this.xe.Se=h,this.xe.it=St(this.xe.st,e,!1),this.xe.jn=s,this.jt.tt(this.xe)}},i}(Ft),Xt=function(t){function i(i,n){var s;return(s=t.call(this,i,n)||this).Wn=new Mt,s}(0,h.Z)(i,t);var n=i.prototype;return n.gt=function(t,i){if(!this.Sn.xt())return null;var n=this.Sn.F();this.xn();var s={st:this.gn,lt:n.color,zt:n.lineStyle,an:n.lineType,Ft:n.lineWidth,it:this.Mn,hn:this.yn.yt().jn()};return this.Wn.tt(s),this.Wn},n.Pn=function(){var t=this;this.gn.forEach((function(i){i.O=t.Sn.Vn().re(i.ot).ee}))},n.Ln=function(t,i,n){var s=this.Bn(t,i);return s.O=n.re(t).ee,s},i}(Lt),Jt=/[2-9]/g,Kt=function(){function t(t){void 0===t&&(t=50),this.Ce=0,this.Te=1,this.Pe=1,this.De={},this.Oe=new Map,this.Re=t}var i=t.prototype;return i.Ae=function(){this.Ce=0,this.Oe.clear(),this.Te=1,this.Pe=1,this.De={}},i.Mi=function(t,i,n){return this.Ne(t,i,n).width},i.gi=function(t,i,n){var s=this.Ne(t,i,n);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2},i.Ne=function(t,i,n){var s=n||Jt,e=String(i).replace(s,"0");if(this.Oe.has(e))return d(this.Oe.get(e)).Ee;if(this.Ce===this.Re){var h=this.De[this.Pe];delete this.De[this.Pe],this.Oe.delete(h),this.Pe++,this.Ce--}t.save(),t.textBaseline="middle";var r=t.measureText(e);return t.restore(),0===r.width&&i.length||(this.Oe.set(e,{Ee:r,Be:this.Te}),this.De[this.Te]=e,this.Ce++,this.Te++),r},t}(),Qt=function(){function t(t){this.Ve=null,this.S=null,this.Ie="right",this.Le=0,this.Fe=t}var i=t.prototype;return i.ze=function(t,i,n,s){this.Ve=t,this.S=i,this.Le=n,this.Ie=s},i.X=function(t,i){null!==this.S&&null!==this.Ve&&this.Ve.X(t,this.S,this.Fe,this.Le,this.Ie,i)},t}(),qt=function(){function t(t,i,n){this.We=t,this.Fe=new Kt(50),this.je=i,this.L=n,this.W=-1,this.jt=new Qt(this.Fe)}return t.prototype.gt=function(t,i){var n=this.L.$e(this.je);if(null===n)return null;var s=n.He(this.je)?n.Ue():this.je.Dt();if(null===s)return null;var e=n.qe(s);if("overlay"===e)return null;var h=this.L.Ye();return h.T!==this.W&&(this.W=h.T,this.Fe.Ae()),this.jt.ze(this.We.Bi(),h,i,e),this.jt},t}(),Yt=function(){function t(){this.Et=null}var i=t.prototype;return i.tt=function(t){this.Et=t},i.X=function(t,i,n,s){if(null!==this.Et&&!1!==this.Et.xt){var e=Math.round(this.Et.et*i);if(!(e<0||e>Math.ceil(this.Et.Kt*i))){var h=Math.ceil(this.Et.Xt*i);t.lineCap="butt",t.strokeStyle=this.Et.O,t.lineWidth=Math.floor(this.Et.Ft*i),f(t,this.Et.zt),c(t,e,0,h)}}},t}(),Ht=function(){function t(t){this.Xe={Xt:0,Kt:0,et:0,O:"rgba(0, 0, 0, 0)",Ft:1,zt:0,xt:!1},this.Ke=new Yt,this.ft=!0,this.Sn=t,this.yn=t.Ut(),this.Ke.tt(this.Xe)}var i=t.prototype;return i.wt=function(){this.ft=!0},i.gt=function(t,i){return this.Sn.xt()?(this.ft&&(this.Ze(t,i),this.ft=!1),this.Ke):null},t}(),ti=function(t){function i(i){return t.call(this,i)||this}return(0,h.Z)(i,t),i.prototype.Ze=function(t,i){this.Xe.xt=!1;var n=this.Sn.Dt(),s=n.Ge().Ge;if(2===s||3===s){var e=this.Sn.F();if(e.baseLineVisible&&this.Sn.xt()){var h=this.Sn.Ct();null!==h&&(this.Xe.xt=!0,this.Xe.et=n.Pt(h.Ot,h.Ot),this.Xe.Xt=i,this.Xe.Kt=t,this.Xe.O=e.baseLineColor,this.Xe.Ft=e.baseLineWidth,this.Xe.zt=e.baseLineStyle)}}},i}(Ht),ii=function(){function t(){this.Et=null}var i=t.prototype;return i.tt=function(t){this.Et=t},i.Je=function(){return this.Et},i.X=function(t,i,n,s){var e=this.Et;if(null!==e){t.save();var h=Math.max(1,Math.floor(i)),r=h%2/2,o=Math.round(e.ke.x*i)+r,u=e.ke.y*i;t.fillStyle=e.Qe,t.beginPath();var a=Math.max(2,1.5*e.tr)*i;t.arc(o,u,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=e.ir,t.beginPath(),t.arc(o,u,e.ht*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=h,t.strokeStyle=e.sr,t.beginPath(),t.arc(o,u,e.ht*i+h/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),ni=[{nr:0,er:.25,rr:4,hr:10,lr:.25,ar:0,_r:.4,ur:.8},{nr:.25,er:.525,rr:10,hr:14,lr:0,ar:0,_r:.8,ur:0},{nr:.525,er:1,rr:14,hr:14,lr:0,ar:0,_r:0,ur:0}];function si(t,i,n,s){return function(t,i){if("transparent"===t)return t;var n=E(t),s=n[3];return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+i*s+")"}(t,n+(s-n)*i)}function ei(t,i){for(var n,e,h=t%2600/2600,r=(0,s.Z)(ni);!(e=r()).done;){var o=e.value;if(h>=o.nr&&h<=o.er){n=o;break}}v(void 0!==n,"Last price animation internal logic error");var u,a,l,f=(h-n.nr)/(n.er-n.nr);return{ir:si(i,f,n.lr,n.ar),sr:si(i,f,n._r,n.ur),ht:(u=f,a=n.rr,l=n.hr,a+(l-a)*u)}}var hi=function(){function t(t){this.jt=new ii,this.ft=!0,this.cr=!0,this.dr=performance.now(),this.pr=this.dr-1,this.vr=t}var i=t.prototype;return i.mr=function(){this.pr=this.dr-1,this.wt()},i.wr=function(){if(this.wt(),2===this.vr.F().lastPriceAnimation){var t=performance.now(),i=this.pr-t;if(i>0)return void(i<650&&(this.pr+=2600));this.dr=t,this.pr=t+2600}},i.wt=function(){this.ft=!0},i.br=function(){this.cr=!0},i.xt=function(){return 0!==this.vr.F().lastPriceAnimation},i.gr=function(){switch(this.vr.F().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.pr}},i.gt=function(t,i){return this.ft?(this.Mt(t,i),this.ft=!1,this.cr=!1):this.cr&&(this.Mr(),this.cr=!1),this.jt},i.Mt=function(t,i){this.jt.tt(null);var n=this.vr.Ut().yt(),s=n.On(),e=this.vr.Ct();if(null!==s&&null!==e){var h=this.vr.Sr(!0);if(!h.yr&&s.kr(h.Fn)){var r={x:n.Nt(h.Fn),y:this.vr.Dt().Pt(h._t,e.Ot)},o=h.O,u=this.vr.F().lineWidth,a=ei(this.Cr(),o);this.jt.tt({Qe:o,tr:u,ir:a.ir,sr:a.sr,ht:a.ht,ke:r})}}},i.Mr=function(){var t=this.jt.Je();if(null!==t){var i=ei(this.Cr(),t.Qe);t.ir=i.ir,t.sr=i.sr,t.ht=i.ht}},i.Cr=function(){return this.gr()?performance.now()-this.dr:2599},t}();function ri(t,i){return Pt(Math.min(Math.max(t,12),30)*i)}function oi(t,i){switch(t){case"arrowDown":case"arrowUp":return ri(i,1);case"circle":return ri(i,.8);case"square":return ri(i,.7)}}function ui(t){return Nt(ri(t,1))}function ai(t){return Math.max(ri(t,.1),3)}function li(t,i,n,s,e){var h=oi("square",n),r=(h-1)/2,o=t-r,u=i-r;return s>=o&&s<=o+h&&e>=u&&e<=u+h}function fi(t,i,n,s,e){var h=(oi("arrowUp",e)-1)/2,r=(Pt(e/2)-1)/2;i.beginPath(),t?(i.moveTo(n-h,s),i.lineTo(n,s-h),i.lineTo(n+h,s),i.lineTo(n+r,s),i.lineTo(n+r,s+h),i.lineTo(n-r,s+h),i.lineTo(n-r,s)):(i.moveTo(n-h,s),i.lineTo(n,s+h),i.lineTo(n+h,s),i.lineTo(n+r,s),i.lineTo(n+r,s-h),i.lineTo(n-r,s-h),i.lineTo(n-r,s)),i.fill()}var ci=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).Et=null,i.Fe=new Kt,i.W=-1,i.j="",i.Tr="",i}(0,h.Z)(i,t);var n=i.prototype;return n.tt=function(t){this.Et=t},n.ze=function(t,i){this.W===t&&this.j===i||(this.W=t,this.j=i,this.Tr=N(t,i),this.Fe.Ae())},n.Pr=function(t,i){if(null===this.Et||null===this.Et.it)return null;for(var n=this.Et.it.from;n<this.Et.it.to;n++){var s=this.Et.st[n];if(di(s,t,i))return{Dr:s.Or,Rr:s.Rr}}return null},n.K=function(t,i,n){if(null!==this.Et&&null!==this.Et.it){t.textBaseline="middle",t.font=this.Tr;for(var s=this.Et.it.from;s<this.Et.it.to;s++){var e=this.Et.st[s];void 0!==e.ti&&(e.ti.Xt=this.Fe.Mi(t,e.ti.Ar),e.ti.Kt=this.W),vi(e,t)}}},i}(B);function vi(t,i){i.fillStyle=t.O,void 0!==t.ti&&function(t,i,n,s){t.fillText(i,n,s)}(i,t.ti.Ar,t.nt-t.ti.Xt/2,t.ti.et),function(t,i){if(0!==t.Rn){switch(t.Nr){case"arrowDown":return void fi(!1,i,t.nt,t.et,t.Rn);case"arrowUp":return void fi(!0,i,t.nt,t.et,t.Rn);case"circle":return void function(t,i,n,s){var e=(oi("circle",s)-1)/2;t.beginPath(),t.arc(i,n,e,0,2*Math.PI,!1),t.fill()}(i,t.nt,t.et,t.Rn);case"square":return void function(t,i,n,s){var e=oi("square",s),h=(e-1)/2,r=i-h,o=n-h;t.fillRect(r,o,e,e)}(i,t.nt,t.et,t.Rn)}t.Nr}}(t,i)}function di(t,i,n){return!(void 0===t.ti||!function(t,i,n,s,e,h){var r=s/2;return e>=t&&e<=t+n&&h>=i-r&&h<=i+r}(t.nt,t.ti.et,t.ti.Xt,t.ti.Kt,i,n))||function(t,i,n){if(0===t.Rn)return!1;switch(t.Nr){case"arrowDown":case"arrowUp":return function(t,i,n,s,e,h){return li(i,n,s,e,h)}(0,t.nt,t.et,t.Rn,i,n);case"circle":return function(t,i,n,s,e){var h=2+oi("circle",n)/2,r=t-s,o=i-e;return Math.sqrt(r*r+o*o)<=h}(t.nt,t.et,t.Rn,i,n);case"square":return li(t.nt,t.et,t.Rn,i,n)}}(t,i,n)}function pi(t,i,n,s,e,h,r,o,u){var a=L(n)?n:n.ne,l=L(n)?n:n.ie,f=L(n)?n:n.se,c=L(i.size)?Math.max(i.size,0):1,v=ui(o.jn())*c,d=v/2;switch(t.Rn=v,i.position){case"inBar":return t.et=r.Pt(a,u),void(void 0!==t.ti&&(t.ti.et=t.et+d+h+.6*e));case"aboveBar":return t.et=r.Pt(l,u)-d-s.Er,void 0!==t.ti&&(t.ti.et=t.et-d-.6*e,s.Er+=1.2*e),void(s.Er+=v+h);case"belowBar":return t.et=r.Pt(f,u)+d+s.Br,void 0!==t.ti&&(t.ti.et=t.et+d+h+.6*e,s.Br+=1.2*e),void(s.Br+=v+h)}i.position}var mi,gi=function(){function t(t,i){this.ft=!0,this.Vr=!0,this.Ir=!0,this.Lr=null,this.jt=new ci,this.vr=t,this.$i=i,this.Et={st:[],it:null}}var i=t.prototype;return i.wt=function(t){this.ft=!0,this.Ir=!0,"data"===t&&(this.Vr=!0)},i.gt=function(t,i,n){if(!this.vr.xt())return null;this.ft&&this.xn();var s=this.$i.F().layout;return this.jt.ze(s.fontSize,s.fontFamily),this.jt.tt(this.Et),this.jt},i.Fr=function(){if(this.Ir){if(this.vr.zr().length>0){var t=this.$i.yt().jn(),i=ai(t),n=1.5*ui(t)+2*i;this.Lr={above:n,below:n}}else this.Lr=null;this.Ir=!1}return this.Lr},i.xn=function(){var t=this.vr.Dt(),i=this.$i.yt(),n=this.vr.zr();this.Vr&&(this.Et.st=n.map((function(t){return{ot:t.time,nt:0,et:0,Rn:0,Nr:t.shape,O:t.color,Or:t.internalId,Rr:t.id,ti:void 0}})),this.Vr=!1);var s=this.$i.F().layout;this.Et.it=null;var e=i.On();if(null!==e){var h=this.vr.Ct();if(null!==h&&0!==this.Et.st.length){var r=NaN,o=ai(i.jn()),u={Er:o,Br:o};this.Et.it=St(this.Et.st,e,!0);for(var a=this.Et.it.from;a<this.Et.it.to;a++){var l=n[a];l.time!==r&&(u.Er=o,u.Br=o,r=l.time);var f=this.Et.st[a];f.nt=i.Nt(l.time),void 0!==l.text&&l.text.length>0&&(f.ti={Ar:l.text,et:0,Xt:0,Kt:0});var c=this.vr.Wr(l.time);null!==c&&pi(f,l,c,u,s.fontSize,o,t,i,h.Ot)}this.ft=!1}}},t}(),wi=function(t){function i(i){return t.call(this,i)||this}return(0,h.Z)(i,t),i.prototype.Ze=function(t,i){var n=this.Xe;n.xt=!1;var s=this.Sn.F();if(s.priceLineVisible&&this.Sn.xt()){var e=this.Sn.Sr(0===s.priceLineSource);e.yr||(n.xt=!0,n.et=e.yi,n.O=this.Sn.jr(e.O),n.Xt=i,n.Kt=t,n.Ft=s.priceLineWidth,n.zt=s.priceLineStyle)}},i}(Ht),bi=function(t){function i(i){var n;return(n=t.call(this)||this).$t=i,n}(0,h.Z)(i,t);var n=i.prototype;return n.Vi=function(t,i,n){t.xt=!1,i.xt=!1;var s=this.$t;if(s.xt()){var e=s.F(),h=e.lastValueVisible,r=""!==s.$r(),o=0===e.seriesLastValueMode,u=s.Sr(!1);if(!u.yr){h&&(t.ti=this.Hr(u,h,o),t.xt=0!==t.ti.length),(r||o)&&(i.ti=this.Ur(u,h,r,o),i.xt=i.ti.length>0);var a=s.jr(u.O),l=x(a);n.t=l.t,n.O=l.i,n.yi=u.yi,i.Rt=s.Ut().At(u.yi/s.Dt().Kt()),t.Rt=a,t.O=n.O,i.O=n.O}}},n.Ur=function(t,i,n,s){var e="",h=this.$t.$r();return n&&0!==h.length&&(e+=h+" "),i&&s&&(e+=this.$t.Dt().qr()?t.Yr:t.Xr),e.trim()},n.Hr=function(t,i,n){return i?n?this.$t.Dt().qr()?t.Xr:t.Yr:t.ti:""},i}(it),yi=function(){function t(t,i){this.Kr=t,this.Zr=i}var i=t.prototype;return i.Gr=function(t){return null!==t&&this.Kr===t.Kr&&this.Zr===t.Zr},i.Jr=function(){return new t(this.Kr,this.Zr)},i.Qr=function(){return this.Kr},i.th=function(){return this.Zr},i.ih=function(){return this.Zr-this.Kr},i.Fi=function(){return this.Zr===this.Kr||Number.isNaN(this.Zr)||Number.isNaN(this.Kr)},i.Gs=function(i){return null===i?this:new t(Math.min(this.Qr(),i.Qr()),Math.max(this.th(),i.th()))},i.sh=function(t){if(L(t)&&0!=this.Zr-this.Kr){var i=.5*(this.Zr+this.Kr),n=this.Zr-i,s=this.Kr-i;n*=t,s*=t,this.Zr=i+n,this.Kr=i+s}},i.nh=function(t){L(t)&&(this.Zr+=t,this.Kr+=t)},i.eh=function(){return{minValue:this.Kr,maxValue:this.Zr}},t.rh=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}(),Mi=function(){function t(t,i){this.hh=t,this.lh=i||null}var i=t.prototype;return i.ah=function(){return this.hh},i.oh=function(){return this.lh},i.eh=function(){return null===this.hh?null:{priceRange:this.hh.eh(),margins:this.lh||void 0}},t.rh=function(i){return null===i?null:new t(yi.rh(i.priceRange),i.margins)},t}(),_i=function(t){function i(i,n){var s;return(s=t.call(this,i)||this)._h=n,s}return(0,h.Z)(i,t),i.prototype.Ze=function(t,i){var n=this.Xe;n.xt=!1;var s=this._h.F();if(this.Sn.xt()&&s.lineVisible){var e=this._h.uh();null!==e&&(n.xt=!0,n.et=e,n.O=s.color,n.Xt=i,n.Kt=t,n.Ft=s.lineWidth,n.zt=s.lineStyle)}},i}(Ht),Ci=function(t){function i(i,n){var s;return(s=t.call(this)||this).vr=i,s._h=n,s}(0,h.Z)(i,t);var n=i.prototype;return n.Vi=function(t,i,n){t.xt=!1,i.xt=!1;var s=this._h.F(),e=s.axisLabelVisible,h=""!==s.title,r=this.vr;if(e&&r.xt()){var o=this._h.uh();if(null!==o){h&&(i.ti=s.title,i.xt=!0),i.Rt=r.Ut().At(o/r.Dt().Kt()),t.ti=this.dh(s.price),t.xt=!0;var u=x(s.color);n.t=u.t,n.O=u.i,n.yi=o}}},n.dh=function(t){var i=this.vr.Ct();return null===i?"":this.vr.Dt().zi(t,i.Ot)},i}(it),Ei=function(){function t(t,i){this.vr=t,this.us=i,this.fh=new _i(t,this),this.We=new Ci(t,this),this.ph=new qt(this.We,t,t.Ut())}var i=t.prototype;return i.mh=function(t){F(this.us,t),this.wt(),this.vr.Ut().wh()},i.F=function(){return this.us},i.bh=function(){return this.fh},i.gh=function(){return this.ph},i.Mh=function(){return this.We},i.wt=function(){this.fh.wt(),this.We.wt()},i.uh=function(){var t=this.vr,i=t.Dt();if(t.Ut().yt().Fi()||i.Fi())return null;var n=t.Ct();return null===n?null:i.Pt(this.us.price,n.Ot)},t}(),xi=function(t){function i(i){var n;return(n=t.call(this)||this).$i=i,n}return(0,h.Z)(i,t),i.prototype.Ut=function(){return this.$i},i}(rt),Si={ee:"",be:"",we:""},Fi=function(){function t(t){this.vr=t}var i=t.prototype;return i.re=function(t,i){var n=this.vr.Sh(),s=this.vr.F();switch(n){case"Line":return this.yh(s,t,i);case"Area":return this.kh(s);case"Baseline":return this.xh(s,t,i);case"Bar":return this.Ch(s,t,i);case"Candlestick":return this.Th(s,t,i);case"Histogram":return this.Ph(s,t,i)}throw new Error("Unknown chart style")},i.Ch=function(t,i,n){var s=Object.assign({},Si),e=t.upColor,h=t.downColor,r=e,o=h,u=p(this.Dh(i,n)),a=m(u.Ot[0])<=m(u.Ot[3]);return void 0!==u.O?(s.ee=u.O,s.be=u.O):(s.ee=a?e:h,s.be=a?r:o),s},i.Th=function(t,i,n){var s,e,h,r=Object.assign({},Si),o=t.upColor,u=t.downColor,a=t.borderUpColor,l=t.borderDownColor,f=t.wickUpColor,c=t.wickDownColor,v=p(this.Dh(i,n)),d=m(v.Ot[0])<=m(v.Ot[3]);return r.ee=null!==(s=v.O)&&void 0!==s?s:d?o:u,r.be=null!==(e=v.Rt)&&void 0!==e?e:d?a:l,r.we=null!==(h=v.me)&&void 0!==h?h:d?f:c,r},i.kh=function(t){return Object.assign(Object.assign({},Si),{ee:t.lineColor})},i.xh=function(t,i,n){var s=p(this.Dh(i,n)).Ot[3]>=t.baseValue.price;return Object.assign(Object.assign({},Si),{ee:s?t.topLineColor:t.bottomLineColor})},i.yh=function(t,i,n){var s,e=p(this.Dh(i,n));return Object.assign(Object.assign({},Si),{ee:null!==(s=e.O)&&void 0!==s?s:t.color})},i.Ph=function(t,i,n){var s=Object.assign({},Si),e=p(this.Dh(i,n));return s.ee=void 0!==e.O?e.O:t.color,s},i.Dh=function(t,i){return void 0!==i?i.Ot:this.vr.Bs().Oh(t)},t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(mi||(mi={}));var Li=function(){function t(){this.Rh=[],this.Ah=new Map,this.Nh=new Map}var i=t.prototype;return i.Eh=function(){return this.Rn()>0?this.Rh[this.Rh.length-1]:null},i.Bh=function(){return this.Rn()>0?this.Vh(0):null},i.Es=function(){return this.Rn()>0?this.Vh(this.Rh.length-1):null},i.Rn=function(){return this.Rh.length},i.Fi=function(){return 0===this.Rn()},i.kr=function(t){return null!==this.Ih(t,0)},i.Oh=function(t){return this.Lh(t)},i.Lh=function(t,i){void 0===i&&(i=0);var n=this.Ih(t,i);return null===n?null:Object.assign(Object.assign({},this.Fh(n)),{Fn:this.Vh(n)})},i.In=function(){return this.Rh},i.zh=function(t,i,n){if(this.Fi())return null;for(var e,h=null,r=(0,s.Z)(n);!(e=r()).done;){var o=e.value;h=Oi(h,this.Wh(t,i,o))}return h},i.tt=function(t){this.Nh.clear(),this.Ah.clear(),this.Rh=t},i.Vh=function(t){return this.Rh[t].Fn},i.Fh=function(t){return this.Rh[t]},i.Ih=function(t,i){var n=this.jh(t);if(null===n&&0!==i)switch(i){case-1:return this.$h(t);case 1:return this.Hh(t);default:throw new TypeError("Unknown search mode")}return n},i.$h=function(t){var i=this.Uh(t);return i>0&&(i-=1),i!==this.Rh.length&&this.Vh(i)<t?i:null},i.Hh=function(t){var i=this.qh(t);return i!==this.Rh.length&&t<this.Vh(i)?i:null},i.jh=function(t){var i=this.Uh(t);return i===this.Rh.length||t<this.Rh[i].Fn?null:i},i.Uh=function(t){return _t(this.Rh,t,(function(t,i){return t.Fn<i}))},i.qh=function(t){return Ct(this.Rh,t,(function(t,i){return i.Fn>t}))},i.Yh=function(t,i,n){for(var s=null,e=t;e<i;e++){var h=this.Rh[e].Ot[n];Number.isNaN(h)||(null===s?s={Xh:h,Kh:h}:(h<s.Xh&&(s.Xh=h),h>s.Kh&&(s.Kh=h)))}return s},i.Wh=function(t,i,n){if(this.Fi())return null;var s=null,e=p(this.Bh()),h=p(this.Es()),r=Math.max(t,e),o=Math.min(i,h),u=30*Math.ceil(r/30),a=Math.max(u,30*Math.floor(o/30)),l=this.Uh(r),f=this.qh(Math.min(o,u,i));s=Oi(s,this.Yh(l,f,n));var c=this.Ah.get(n);void 0===c&&(c=new Map,this.Ah.set(n,c));for(var v=Math.max(u+1,r);v<a;v+=30){var d=Math.floor(v/30),m=c.get(d);if(void 0===m){var g=this.Uh(30*d),w=this.qh(30*(d+1)-1);m=this.Yh(g,w,n),c.set(d,m)}s=Oi(s,m)}var b=this.Uh(a),y=this.qh(o);return s=Oi(s,this.Yh(b,y,n))},t}();function Oi(t,i){return null===t?i:null===i?t:{Xh:Math.min(t.Xh,i.Xh),Kh:Math.max(t.Kh,i.Kh)}}var Ti=function(t){function i(i,n,s){var h;(h=t.call(this,i)||this).Et=new Li,h.fh=new wi(e(h)),h.Zh=[],h.Gh=new ti(e(h)),h.Jh=null,h.Qh=null,h.tl=[],h.il=[],h.sl=null,h.us=n,h.nl=s;var r=new bi(e(h));return h.es=[r],h.ph=new qt(r,e(h),i),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.Jh=new hi(e(h))),h.el(),h.rl(),h}(0,h.Z)(i,t);var n=i.prototype;return n.M=function(){null!==this.sl&&clearTimeout(this.sl)},n.jr=function(t){return this.us.priceLineColor||t},n.Sr=function(t){var i={yr:!0},n=this.Dt();if(this.Ut().yt().Fi()||n.Fi()||this.Et.Fi())return i;var s,e,h=this.Ut().yt().On(),r=this.Ct();if(null===h||null===r)return i;if(t){var o=this.Et.Eh();if(null===o)return i;s=o,e=o.Fn}else{var u=this.Et.Lh(h.vn(),-1);if(null===u)return i;if(null===(s=this.Et.Oh(u.Fn)))return i;e=u.Fn}var a=s.Ot[3],l=this.Vn().re(e,{Ot:s}),f=n.Pt(a,r.Ot);return{yr:!1,_t:a,ti:n.zi(a,r.Ot),Yr:n.hl(a),Xr:n.ll(a,r.Ot),O:l.ee,yi:f,Fn:e}},n.Vn=function(){return null!==this.Qh||(this.Qh=new Fi(this)),this.Qh},n.F=function(){return this.us},n.mh=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.us.priceScaleId&&this.Ut().al(this,i),F(this.us,t),void 0!==t.priceFormat&&(this.el(),this.Ut().ol()),this.Ut()._l(this),this.Ut().ul(),this.bs.wt("options")},n.tt=function(t,i){this.Et.tt(t),this.cl(),this.bs.wt("data"),this.cs.wt("data"),null!==this.Jh&&(i&&i.dl?this.Jh.wr():0===t.length&&this.Jh.mr());var n=this.Ut().$e(this);this.Ut().fl(n),this.Ut()._l(this),this.Ut().ul(),this.Ut().wh()},n.pl=function(t){this.tl=t,this.cl();var i=this.Ut().$e(this);this.cs.wt("data"),this.Ut().fl(i),this.Ut()._l(this),this.Ut().ul(),this.Ut().wh()},n.vl=function(){return this.tl},n.zr=function(){return this.il},n.ml=function(t){var i=new Ei(this,t);return this.Zh.push(i),this.Ut()._l(this),i},n.wl=function(t){var i=this.Zh.indexOf(t);-1!==i&&this.Zh.splice(i,1),this.Ut()._l(this)},n.Sh=function(){return this.nl},n.Ct=function(){var t=this.bl();return null===t?null:{Ot:t.Ot[3],gl:t.ot}},n.bl=function(){var t=this.Ut().yt().On();if(null===t)return null;var i=t.pn();return this.Et.Lh(i,1)},n.Bs=function(){return this.Et},n.Wr=function(t){var i=this.Et.Oh(t);return null===i?null:"Bar"===this.nl||"Candlestick"===this.nl?{te:i.Ot[0],ie:i.Ot[1],se:i.Ot[2],ne:i.Ot[3]}:i.Ot[3]},n.Ml=function(t){var i=this,n=this.Jh;return null!==n&&n.xt()?(null===this.sl&&n.gr()&&(this.sl=setTimeout((function(){i.sl=null,i.Ut().Sl()}),0)),n.br(),[n]):[]},n.Ps=function(){var t=[];this.yl()||t.push(this.Gh),t.push(this.bs,this.fh,this.cs);var i=this.Zh.map((function(t){return t.bh()}));return t.push.apply(t,i),t},n.Gi=function(t){return[this.ph].concat(this.Zh.map((function(t){return t.gh()})))},n.Ds=function(t,i){if(i!==this.qi&&!this.yl())return[];for(var n,e=[].concat(this.es),h=(0,s.Z)(this.Zh);!(n=h()).done;){var r=n.value;e.push(r.Mh())}return e},n.kl=function(t,i){var n=this;if(void 0!==this.us.autoscaleInfoProvider){var s=this.us.autoscaleInfoProvider((function(){var s=n.xl(t,i);return null===s?null:s.eh()}));return Mi.rh(s)}return this.xl(t,i)},n.Cl=function(){return this.us.priceFormat.minMove},n.Tl=function(){return this.Pl},n.Rs=function(){var t;this.bs.wt(),this.cs.wt();for(var i,n=(0,s.Z)(this.es);!(i=n()).done;){i.value.wt()}for(var e,h=(0,s.Z)(this.Zh);!(e=h()).done;){e.value.wt()}this.fh.wt(),this.Gh.wt(),null===(t=this.Jh)||void 0===t||t.wt()},n.Dt=function(){return p(t.prototype.Dt.call(this))},n.kt=function(t){if("Line"!==this.nl&&"Area"!==this.nl&&"Baseline"!==this.nl||!this.us.crosshairMarkerVisible)return null;var i=this.Et.Oh(t);return null===i?null:{_t:i.Ot[3],ht:this.Dl(),Rt:this.Ol(),Tt:this.Rl(t)}},n.$r=function(){return this.us.title},n.xt=function(){return this.us.visible},n.yl=function(){return!ut(this.Dt().Al())},n.xl=function(t,i){if(!O(t)||!O(i)||this.Et.Fi())return null;var n="Line"===this.nl||"Area"===this.nl||"Baseline"===this.nl||"Histogram"===this.nl?[3]:[2,1],s=this.Et.zh(t,i,n),e=null!==s?new yi(s.Xh,s.Kh):null;if("Histogram"===this.Sh()){var h=this.us.base,r=new yi(h,h);e=null!==e?e.Gs(r):r}return new Mi(e,this.cs.Fr())},n.Dl=function(){switch(this.nl){case"Line":case"Area":case"Baseline":return this.us.crosshairMarkerRadius}return 0},n.Ol=function(){switch(this.nl){case"Line":case"Area":case"Baseline":var t=this.us.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},n.Rl=function(t){switch(this.nl){case"Line":case"Area":case"Baseline":var i=this.us.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.Vn().re(t).ee},n.el=function(){switch(this.us.priceFormat.type){case"custom":this.Pl={format:this.us.priceFormat.formatter};break;case"volume":this.Pl=new vt(this.us.priceFormat.precision);break;case"percent":this.Pl=new ct(this.us.priceFormat.precision);break;default:var t=Math.pow(10,this.us.priceFormat.precision);this.Pl=new ft(t,this.us.priceFormat.minMove*t)}null!==this.qi&&this.qi.Nl()},n.cl=function(){var t=this,i=this.Ut().yt();if(i.Fi()||0===this.Et.Rn())this.il=[];else{var n=p(this.Et.Bh());this.il=this.tl.map((function(s,e){var h=p(i.El(s.time,!0)),r=h<n?1:-1;return{time:p(t.Et.Lh(h,r)).Fn,position:s.position,shape:s.shape,color:s.color,id:s.id,internalId:e,text:s.text,size:s.size}}))}},n.rl=function(){switch(this.cs=new gi(this,this.Ut()),this.nl){case"Bar":this.bs=new It(this,this.Ut());break;case"Candlestick":this.bs=new Zt(this,this.Ut());break;case"Line":this.bs=new Xt(this,this.Ut());break;case"Area":this.bs=new Ot(this,this.Ut());break;case"Baseline":this.bs=new Ut(this,this.Ut());break;case"Histogram":this.bs=new Gt(this,this.Ut());break;default:throw Error("Unknown chart style assigned: "+this.nl)}},i}(xi),Ri=function(){function t(t){this.us=t}return t.prototype.Bl=function(t,i,n){var s=t;if(0===this.us.mode)return s;var e=n.fs(),h=e.Ct();if(null===h)return s;var r=e.Pt(t,h),o=n.Vl().filter((function(t){return t instanceof Ti})).reduce((function(t,s){if(n.He(s)||!s.xt())return t;var e=s.Dt(),h=s.Bs();if(e.Fi()||!h.kr(i))return t;var r=h.Oh(i);if(null===r)return t;var o=m(s.Ct());return t.concat([e.Pt(r.Ot[3],o.Ot)])}),[]);if(0===o.length)return s;o.sort((function(t,i){return Math.abs(t-r)-Math.abs(i-r)}));var u=o[0];return s=e.ps(u,h)},t}(),Ii=function(){function t(){this.Et=null}var i=t.prototype;return i.tt=function(t){this.Et=t},i.X=function(t,i,n,e){var h=this;if(null!==this.Et){var r=Math.max(1,Math.floor(i));t.lineWidth=r;var o=Math.ceil(this.Et.Lt*i),u=Math.ceil(this.Et.It*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=p(h.Et);if(n.Il){t.strokeStyle=n.Ll,f(t,n.Fl),t.beginPath();for(var e,a=(0,s.Z)(n.zl);!(e=a()).done;){var l=e.value,c=Math.round(l.Wl*i);t.moveTo(c,-r),t.lineTo(c,o+r)}t.stroke()}if(n.jl){t.strokeStyle=n.$l,f(t,n.Hl),t.beginPath();for(var v,d=(0,s.Z)(n.Ul);!(v=d()).done;){var m=v.value,g=Math.round(m.Wl*i);t.moveTo(-r,g),t.lineTo(u+r,g)}t.stroke()}}))}},t}(),Di=function(){function t(t){this.jt=new Ii,this.ft=!0,this.Qi=t}var i=t.prototype;return i.wt=function(){this.ft=!0},i.gt=function(t,i){if(this.ft){var n=this.Qi.Ut().F().grid,s={Lt:t,It:i,jl:n.horzLines.visible,Il:n.vertLines.visible,$l:n.horzLines.color,Ll:n.vertLines.color,Hl:n.horzLines.style,Fl:n.vertLines.style,Ul:this.Qi.fs().ql(),zl:this.Qi.Ut().yt().ql()||[]};this.jt.tt(s),this.ft=!1}return this.jt},t}(),ki=function(){function t(t){this.bs=new Di(t)}return t.prototype.bh=function(){return this.bs},t}(),$i={Yl:4,Xl:1e-4};function Ni(t,i){var n=100*(t-i)/i;return i<0?-n:n}function Pi(t,i){var n=Ni(t.Qr(),i),s=Ni(t.th(),i);return new yi(n,s)}function Vi(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function Bi(t,i){var n=Vi(t.Qr(),i),s=Vi(t.th(),i);return new yi(n,s)}function Ui(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=$t(n+i.Xl)+i.Yl;return t<0?-s:s}function zi(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Math.pow(10,n-i.Yl)-i.Xl;return t<0?-s:s}function Zi(t,i){if(null===t)return null;var n=Ui(t.Qr(),i),s=Ui(t.th(),i);return new yi(n,s)}function ji(t,i){if(null===t)return null;var n=zi(t.Qr(),i),s=zi(t.th(),i);return new yi(n,s)}function Wi(t){if(null===t)return $i;var i=Math.abs(t.th()-t.Qr());if(i>=1||i<1e-15)return $i;var n=Math.ceil(Math.abs(Math.log10(i))),s=$i.Yl+n;return{Yl:s,Xl:1/Math.pow(10,s)}}var Ai,Gi=function(){function t(t,i){if(this.Kl=t,this.Zl=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Kl))this.Gl=[2,2.5,2];else{this.Gl=[];for(var n=this.Kl;1!==n;){if(n%2==0)this.Gl.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Gl.push(2,2.5),n/=5}if(this.Gl.length>100)throw new Error("something wrong with base")}}}return t.prototype.Jl=function(t,i,n){for(var s,e=0===this.Kl?0:1/this.Kl,h=Math.pow(10,Math.max(0,Math.ceil($t(t-i)))),r=0,o=this.Zl[0];;){var u=kt(h,e,1e-14)&&h>e+1e-14,a=kt(h,n*o,1e-14),l=kt(h,1,1e-14);if(!(u&&a&&l))break;h/=o,o=this.Zl[++r%this.Zl.length]}if(h<=e+1e-14&&(h=e),h=Math.max(1,h),this.Gl.length>0&&(s=h,1,1e-14,Math.abs(s-1)<1e-14))for(r=0,o=this.Gl[0];kt(h,n*o,1e-14)&&h>e+1e-14;)h/=o,o=this.Gl[++r%this.Gl.length];return h},t}(),Xi=function(){function t(t,i,n,s){this.Ql=[],this.Ii=t,this.Kl=i,this.ta=n,this.ia=s}var i=t.prototype;return i.Jl=function(t,i){if(t<i)throw new Error("high < low");var n=this.Ii.Kt(),s=(t-i)*this.sa()/n,e=new Gi(this.Kl,[2,2.5,2]),h=new Gi(this.Kl,[2,2,2.5]),r=new Gi(this.Kl,[2.5,2,2]),o=[];return o.push(e.Jl(t,i,s),h.Jl(t,i,s),r.Jl(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(o)},i.na=function(){var t=this.Ii,i=t.Ct();if(null!==i){var n=t.Kt(),s=this.ta(n-1,i),e=this.ta(0,i),h=this.Ii.F().entireTextOnly?this.ea()/2:0,r=h,o=n-1-h,u=Math.max(s,e),a=Math.min(s,e);if(u!==a){for(var l=this.Jl(u,a),f=u%l,c=u>=a?1:-1,v=null,d=0,p=u-(f+=f<0?l:0);p>a;p-=l){var m=this.ia(p,i,!0);null!==v&&Math.abs(m-v)<this.sa()||m<r||m>o||(d<this.Ql.length?(this.Ql[d].Wl=m,this.Ql[d].ra=t.ha(p)):this.Ql.push({Wl:m,ra:t.ha(p)}),d++,v=m,t.la()&&(l=this.Jl(p*c,a)))}this.Ql.length=d}else this.Ql=[]}else this.Ql=[]},i.ql=function(){return this.Ql},i.ea=function(){return this.Ii.T()},i.sa=function(){return Math.ceil(2.5*this.ea())},t}();function Ji(t){return t.slice().sort((function(t,i){return p(t.Xi())-p(i.Xi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Ai||(Ai={}));var Ki=new ct,Qi=new ft(100,1),qi=function(){function t(t,i,n,s){this.aa=0,this.oa=null,this.hh=null,this._a=null,this.ua={ca:!1,da:null},this.fa=0,this.pa=0,this.va=new S,this.ma=new S,this.wa=[],this.ba=null,this.ga=null,this.Ma=null,this.Sa=null,this.Pl=Qi,this.ya=Wi(null),this.ka=t,this.us=i,this.xa=n,this.Ca=s,this.Ta=new Xi(this,100,this.Pa.bind(this),this.Da.bind(this))}var i=t.prototype;return i.Al=function(){return this.ka},i.F=function(){return this.us},i.mh=function(t){if(F(this.us,t),this.Nl(),void 0!==t.mode&&this.Oa({Ge:t.mode}),void 0!==t.scaleMargins){var i=d(t.scaleMargins.top),n=d(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.Ra(),this.ga=null}},i.Aa=function(){return this.us.autoScale},i.la=function(){return 1===this.us.mode},i.qr=function(){return 2===this.us.mode},i.Na=function(){return 3===this.us.mode},i.Ge=function(){return{Ws:this.us.autoScale,Ea:this.us.invertScale,Ge:this.us.mode}},i.Oa=function(t){var i=this.Ge(),n=null;void 0!==t.Ws&&(this.us.autoScale=t.Ws),void 0!==t.Ge&&(this.us.mode=t.Ge,2!==t.Ge&&3!==t.Ge||(this.us.autoScale=!0),this.ua.ca=!1),1===i.Ge&&t.Ge!==i.Ge&&(function(t,i){if(null===t)return!1;var n=zi(t.Qr(),i),s=zi(t.th(),i);return isFinite(n)&&isFinite(s)}(this.hh,this.ya)?null!==(n=ji(this.hh,this.ya))&&this.Ba(n):this.us.autoScale=!0),1===t.Ge&&t.Ge!==i.Ge&&(null!==(n=Zi(this.hh,this.ya))&&this.Ba(n));var s=i.Ge!==this.us.mode;s&&(2===i.Ge||this.qr())&&this.Nl(),s&&(3===i.Ge||this.Na())&&this.Nl(),void 0!==t.Ea&&i.Ea!==t.Ea&&(this.us.invertScale=t.Ea,this.Va()),this.ma.m(i,this.Ge())},i.Ia=function(){return this.ma},i.T=function(){return this.xa.fontSize},i.Kt=function(){return this.aa},i.La=function(t){this.aa!==t&&(this.aa=t,this.Ra(),this.ga=null)},i.Fa=function(){if(this.oa)return this.oa;var t=this.Kt()-this.za()-this.Wa();return this.oa=t,t},i.ah=function(){return this.ja(),this.hh},i.Ba=function(t,i){var n=this.hh;(i||null===n&&null!==t||null!==n&&!n.Gr(t))&&(this.ga=null,this.hh=t)},i.Fi=function(){return this.ja(),0===this.aa||!this.hh||this.hh.Fi()},i.$a=function(t){return this.Ea()?t:this.Kt()-1-t},i.Pt=function(t,i){return this.qr()?t=Ni(t,i):this.Na()&&(t=Vi(t,i)),this.Da(t,i)},i.En=function(t,i,n){this.ja();for(var s=this.Wa(),e=p(this.ah()),h=e.Qr(),r=e.th(),o=this.Fa()-1,u=this.Ea(),a=o/(r-h),l=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.Ha(),v=l;v<f;v++){var d=t[v],m=d._t;if(!isNaN(m)){var g=m;null!==c&&(g=c(d._t,i));var w=s+a*(g-h),b=u?w:this.aa-1-w;d.et=b}}},i.Jn=function(t,i,n){this.ja();for(var s=this.Wa(),e=p(this.ah()),h=e.Qr(),r=e.th(),o=this.Fa()-1,u=this.Ea(),a=o/(r-h),l=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.Ha(),v=l;v<f;v++){var d=t[v],m=d.te,g=d.ie,w=d.se,b=d.ne;null!==c&&(m=c(d.te,i),g=c(d.ie,i),w=c(d.se,i),b=c(d.ne,i));var y=s+a*(m-h),M=u?y:this.aa-1-y;d.Zn=M,y=s+a*(g-h),M=u?y:this.aa-1-y,d.Yn=M,y=s+a*(w-h),M=u?y:this.aa-1-y,d.Xn=M,y=s+a*(b-h),M=u?y:this.aa-1-y,d.Gn=M}},i.ps=function(t,i){var n=this.Pa(t,i);return this.Ua(n,i)},i.Ua=function(t,i){var n=t;return this.qr()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.Na()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},i.Vl=function(){return this.wa},i.qa=function(){if(this.ba)return this.ba;for(var t=[],i=0;i<this.wa.length;i++){var n=this.wa[i];null===n.Xi()&&n.Ki(i+1),t.push(n)}return t=Ji(t),this.ba=t,this.ba},i.Ya=function(t){-1===this.wa.indexOf(t)&&(this.wa.push(t),this.Nl(),this.Xa())},i.Ka=function(t){var i=this.wa.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.wa.splice(i,1),0===this.wa.length&&(this.Oa({Ws:!0}),this.Ba(null)),this.Nl(),this.Xa()},i.Ct=function(){for(var t,i=null,n=(0,s.Z)(this.wa);!(t=n()).done;){var e=t.value.Ct();null!==e&&(null===i||e.gl<i.gl)&&(i=e)}return null===i?null:i.Ot},i.Ea=function(){return this.us.invertScale},i.ql=function(){var t=null===this.Ct();if(null!==this.ga&&(t||this.ga.Za===t))return this.ga.ql;this.Ta.na();var i=this.Ta.ql();return this.ga={ql:i,Za:t},this.va.m(),i},i.Ga=function(){return this.va},i.Ja=function(t){this.qr()||this.Na()||null===this.Ma&&null===this._a&&(this.Fi()||(this.Ma=this.aa-t,this._a=p(this.ah()).Jr()))},i.Qa=function(t){if(!this.qr()&&!this.Na()&&null!==this.Ma){this.Oa({Ws:!1}),(t=this.aa-t)<0&&(t=0);var i=(this.Ma+.2*(this.aa-1))/(t+.2*(this.aa-1)),n=p(this._a).Jr();i=Math.max(i,.1),n.sh(i),this.Ba(n)}},i.io=function(){this.qr()||this.Na()||(this.Ma=null,this._a=null)},i.so=function(t){this.Aa()||null===this.Sa&&null===this._a&&(this.Fi()||(this.Sa=t,this._a=p(this.ah()).Jr()))},i.no=function(t){if(!this.Aa()&&null!==this.Sa){var i=p(this.ah()).ih()/(this.Fa()-1),n=t-this.Sa;this.Ea()&&(n*=-1);var s=n*i,e=p(this._a).Jr();e.nh(s),this.Ba(e,!0),this.ga=null}},i.eo=function(){this.Aa()||null!==this.Sa&&(this.Sa=null,this._a=null)},i.Tl=function(){return this.Pl||this.Nl(),this.Pl},i.zi=function(t,i){switch(this.us.mode){case 2:return this.Tl().format(Ni(t,i));case 3:return this.Tl().format(Vi(t,i));default:return this.dh(t)}},i.ha=function(t){switch(this.us.mode){case 2:case 3:return this.Tl().format(t);default:return this.dh(t)}},i.hl=function(t){return this.dh(t,p(this.ro()).Tl())},i.ll=function(t,i){return t=Ni(t,i),Ki.format(t)},i.ho=function(){return this.wa},i.lo=function(t){this.ua={da:t,ca:!1}},i.Rs=function(){this.wa.forEach((function(t){return t.Rs()}))},i.Nl=function(){this.ga=null;var t=this.ro(),i=100;null!==t&&(i=Math.round(1/t.Cl())),this.Pl=Qi,this.qr()?(this.Pl=Ki,i=100):this.Na()?(this.Pl=new ft(100,1),i=100):null!==t&&(this.Pl=t.Tl()),this.Ta=new Xi(this,i,this.Pa.bind(this),this.Da.bind(this)),this.Ta.na()},i.Xa=function(){this.ba=null},i.ro=function(){return this.wa[0]||null},i.za=function(){return this.Ea()?this.us.scaleMargins.bottom*this.Kt()+this.pa:this.us.scaleMargins.top*this.Kt()+this.fa},i.Wa=function(){return this.Ea()?this.us.scaleMargins.top*this.Kt()+this.fa:this.us.scaleMargins.bottom*this.Kt()+this.pa},i.ja=function(){this.ua.ca||(this.ua.ca=!0,this.ao())},i.Ra=function(){this.oa=null},i.Da=function(t,i){if(this.ja(),this.Fi())return 0;t=this.la()&&t?Ui(t,this.ya):t;var n=p(this.ah()),s=this.Wa()+(this.Fa()-1)*(t-n.Qr())/n.ih();return this.$a(s)},i.Pa=function(t,i){if(this.ja(),this.Fi())return 0;var n=this.$a(t),s=p(this.ah()),e=s.Qr()+s.ih()*((n-this.Wa())/(this.Fa()-1));return this.la()?zi(e,this.ya):e},i.Va=function(){this.ga=null,this.Ta.na()},i.ao=function(){var t=this.ua.da;if(null!==t){for(var i,n,e,h=null,r=this.ho(),o=0,u=0,a=(0,s.Z)(r);!(i=a()).done;){var l=i.value;if(l.xt()){var f=l.Ct();if(null!==f){var c=l.kl(t.pn(),t.vn()),v=c&&c.ah();if(null!==v){switch(this.us.mode){case 1:v=Zi(v,this.ya);break;case 2:v=Pi(v,f.Ot);break;case 3:v=Bi(v,f.Ot)}if(h=null===h?v:h.Gs(p(v)),null!==c){var d=c.oh();null!==d&&(o=Math.max(o,d.above),u=Math.max(o,d.below))}}}}}if(o===this.fa&&u===this.pa||(this.fa=o,this.pa=u,this.ga=null,this.Ra()),null!==h){if(h.Qr()===h.th()){var m=this.ro(),g=5*(null===m||this.qr()||this.Na()?1:m.Cl());this.la()&&(h=ji(h,this.ya)),h=new yi(h.Qr()-g,h.th()+g),this.la()&&(h=Zi(h,this.ya))}if(this.la()){var w=ji(h,this.ya),b=Wi(w);if(n=b,e=this.ya,n.Yl!==e.Yl||n.Xl!==e.Xl){var y=null!==this._a?ji(this._a,this.ya):null;this.ya=b,h=Zi(w,b),null!==y&&(this._a=Zi(y,b))}}this.Ba(h)}else null===this.hh&&(this.Ba(new yi(-.5,.5)),this.ya=Wi(null));this.ua.ca=!0}},i.Ha=function(){var t=this;return this.qr()?Ni:this.Na()?Vi:this.la()?function(i){return Ui(i,t.ya)}:null},i.dh=function(t,i){return void 0===this.Ca.priceFormatter?(void 0===i&&(i=this.Tl()),i.format(t)):this.Ca.priceFormatter(t)},t}(),Yi=function(){function t(t,i){this.wa=[],this.oo=new Map,this.aa=0,this.Le=0,this._o=1e3,this.ba=null,this.uo=new S,this.co=t,this.$i=i,this.do=new ki(this);var n=i.F();this.fo=this.po("left",n.leftPriceScale),this.vo=this.po("right",n.rightPriceScale),this.fo.Ia().l(this.mo.bind(this,this.fo),this),this.vo.Ia().l(this.mo.bind(this,this.vo),this),this.wo(n)}var i=t.prototype;return i.wo=function(t){if(t.leftPriceScale&&this.fo.mh(t.leftPriceScale),t.rightPriceScale&&this.vo.mh(t.rightPriceScale),t.localization&&(this.fo.Nl(),this.vo.Nl()),t.overlayPriceScales)for(var i=0,n=Array.from(this.oo.values());i<n.length;i++){var s=p(n[i][0].Dt());s.mh(t.overlayPriceScales),t.localization&&s.Nl()}},i.bo=function(t){switch(t){case"left":return this.fo;case"right":return this.vo}return this.oo.has(t)?d(this.oo.get(t))[0].Dt():null},i.M=function(){this.Ut().Mo().v(this),this.fo.Ia().v(this),this.vo.Ia().v(this),this.wa.forEach((function(t){t.M&&t.M()})),this.uo.m()},i.So=function(){return this._o},i.yo=function(t){this._o=t},i.Ut=function(){return this.$i},i.Xt=function(){return this.Le},i.Kt=function(){return this.aa},i.ko=function(t){this.Le=t,this.xo()},i.La=function(t){var i=this;this.aa=t,this.fo.La(t),this.vo.La(t),this.wa.forEach((function(n){if(i.He(n)){var s=n.Dt();null!==s&&s.La(t)}})),this.xo()},i.Vl=function(){return this.wa},i.He=function(t){var i=t.Dt();return null===i||this.fo!==i&&this.vo!==i},i.Ya=function(t,i,n){var s=void 0!==n?n:this.To().Co+1;this.Po(t,i,s)},i.Ka=function(t){var i=this.wa.indexOf(t);v(-1!==i,"removeDataSource: invalid data source"),this.wa.splice(i,1);var n=p(t.Dt()).Al();if(this.oo.has(n)){var s=d(this.oo.get(n)),e=s.indexOf(t);-1!==e&&(s.splice(e,1),0===s.length&&this.oo.delete(n))}var h=t.Dt();h&&h.Vl().indexOf(t)>=0&&h.Ka(t),null!==h&&(h.Xa(),this.Do(h)),this.ba=null},i.qe=function(t){return t===this.fo?"left":t===this.vo?"right":"overlay"},i.Oo=function(){return this.fo},i.Ro=function(){return this.vo},i.Ao=function(t,i){t.Ja(i)},i.No=function(t,i){t.Qa(i),this.xo()},i.Eo=function(t){t.io()},i.Bo=function(t,i){t.so(i)},i.Vo=function(t,i){t.no(i),this.xo()},i.Io=function(t){t.eo()},i.xo=function(){this.wa.forEach((function(t){t.Rs()}))},i.fs=function(){var t=null;return this.$i.F().rightPriceScale.visible&&0!==this.vo.Vl().length?t=this.vo:this.$i.F().leftPriceScale.visible&&0!==this.fo.Vl().length?t=this.fo:0!==this.wa.length&&(t=this.wa[0].Dt()),null===t&&(t=this.vo),t},i.Ue=function(){var t=null;return this.$i.F().rightPriceScale.visible?t=this.vo:this.$i.F().leftPriceScale.visible&&(t=this.fo),t},i.Do=function(t){null!==t&&t.Aa()&&this.Lo(t)},i.Fo=function(t){var i=this.co.On();t.Oa({Ws:!0}),null!==i&&t.lo(i),this.xo()},i.zo=function(){this.Lo(this.fo),this.Lo(this.vo)},i.Wo=function(){var t=this;this.Do(this.fo),this.Do(this.vo),this.wa.forEach((function(i){t.He(i)&&t.Do(i.Dt())})),this.xo(),this.$i.wh()},i.qa=function(){return null===this.ba&&(this.ba=Ji(this.wa)),this.ba},i.jo=function(){return this.uo},i.$o=function(){return this.do},i.Lo=function(t){var i=t.ho();if(i&&i.length>0&&!this.co.Fi()){var n=this.co.On();null!==n&&t.lo(n)}t.Rs()},i.To=function(){var t=this.qa();if(0===t.length)return{Ho:0,Co:0};for(var i=0,n=0,s=0;s<t.length;s++){var e=t[s].Xi();null!==e&&(e<i&&(i=e),e>n&&(n=e))}return{Ho:i,Co:n}},i.Po=function(t,i,n){var s=this.bo(i);if(null===s&&(s=this.po(i,this.$i.F().overlayPriceScales)),this.wa.push(t),!ut(i)){var e=this.oo.get(i)||[];e.push(t),this.oo.set(i,e)}s.Ya(t),t.Zi(s),t.Ki(n),this.Do(s),this.ba=null},i.mo=function(t,i,n){i.Ge!==n.Ge&&this.Lo(t)},i.po=function(t,i){var n=Object.assign({visible:!0,autoScale:!0},I(i)),s=new qi(t,n,this.$i.F().layout,this.$i.F().localization);return s.La(this.Kt()),s},t}(),Hi=function(t){return t.getUTCFullYear()};var tn=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.Uo=t,this.qo=i}return t.prototype.Yo=function(t){return function(t,i,n){return i.replace(/yyyy/g,function(t){return lt(Hi(t),4)}(t)).replace(/yy/g,function(t){return lt(Hi(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return lt(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return lt(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.Uo,this.qo)},t}(),nn=function(){function t(t){this.Xo=t||"%h:%m:%s"}return t.prototype.Yo=function(t){return this.Xo.replace("%h",lt(t.getUTCHours(),2)).replace("%m",lt(t.getUTCMinutes(),2)).replace("%s",lt(t.getUTCSeconds(),2))},t}(),sn={Ko:"yyyy-MM-dd",Zo:"%h:%m:%s",Go:" ",Jo:"default"},en=function(){function t(t){void 0===t&&(t={});var i=Object.assign(Object.assign({},sn),t);this.Qo=new tn(i.Ko,i.Jo),this.t_=new nn(i.Zo),this.i_=i.Go}return t.prototype.Yo=function(t){return""+this.Qo.Yo(t)+this.i_+this.t_.Yo(t)},t}(),hn=function(){function t(t,i){void 0===i&&(i=50),this.Ce=0,this.Te=1,this.Pe=1,this.Oe=new Map,this.De=new Map,this.s_=t,this.Re=i}return t.prototype.Yo=function(t){var i=t.ot,n=void 0===i.n_?new Date(1e3*i.e_).getTime():new Date(Date.UTC(i.n_.year,i.n_.month-1,i.n_.day)).getTime(),s=this.Oe.get(n);if(void 0!==s)return s.r_;if(this.Ce===this.Re){var e=this.De.get(this.Pe);this.De.delete(this.Pe),this.Oe.delete(d(e)),this.Pe++,this.Ce--}var h=this.s_(t);return this.Oe.set(n,{r_:h,Be:this.Te}),this.De.set(this.Te,n),this.Ce++,this.Te++,h},t}(),rn=function(){function t(t,i){v(t<=i,"right should be >= left"),this.h_=t,this.l_=i}var i=t.prototype;return i.pn=function(){return this.h_},i.vn=function(){return this.l_},i.a_=function(){return this.l_-this.h_+1},i.kr=function(t){return this.h_<=t&&t<=this.l_},i.Gr=function(t){return this.h_===t.pn()&&this.l_===t.vn()},t}();function on(t,i){return null===t||null===i?t===i:t.Gr(i)}var un,an,ln,fn,cn,vn=function(){function t(){this.o_=new Map,this.Oe=null}var i=t.prototype;return i.__=function(t,i){this.u_(i),this.Oe=null;for(var n=i;n<t.length;++n){var s=t[n],e=this.o_.get(s.c_);void 0===e&&(e=[],this.o_.set(s.c_,e)),e.push({Fn:n,ot:s.ot,d_:s.c_,f_:s.f_})}},i.p_=function(t,i){var n=Math.ceil(i/t);return null!==this.Oe&&this.Oe.v_===n||(this.Oe={ql:this.m_(n),v_:n}),this.Oe.ql},i.u_=function(t){if(0!==t){var i=[];this.o_.forEach((function(n,s){t<=n[0].Fn?i.push(s):n.splice(_t(n,t,(function(i){return i.Fn<t})),1/0)}));for(var n=0,s=i;n<s.length;n++){var e=s[n];this.o_.delete(e)}}else this.o_.clear()},i.m_=function(t){for(var i,n=[],e=(0,s.Z)(Array.from(this.o_.keys()).sort((function(t,i){return i-t})));!(i=e()).done;){var h=i.value;if(this.o_.get(h)){var r=n;n=[];for(var o=r.length,u=0,a=d(this.o_.get(h)),l=a.length,f=1/0,c=-1/0,v=0;v<l;v++){for(var p=a[v],m=p.Fn;u<o;){var g=r[u],w=g.Fn;if(!(w<m)){f=w;break}u++,n.push(g),c=w,f=1/0}f-m>=t&&m-c>=t&&(n.push(p),c=m)}for(;u<o;u++)n.push(r[u])}}return n},t}(),dn=function(){function t(t){this.w_=t}var i=t.prototype;return i.b_=function(){return null===this.w_?null:new rn(Math.floor(this.w_.pn()),Math.ceil(this.w_.vn()))},i.g_=function(){return this.w_},t.M_=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(un||(un={}));var pn=function(){function t(t,i,n){this.Le=0,this.S_=null,this.y_=[],this.Sa=null,this.Ma=null,this.k_=new vn,this.x_=new Map,this.C_=dn.M_(),this.T_=!0,this.P_=new S,this.D_=new S,this.O_=new S,this.R_=null,this.A_=null,this.N_=[],this.us=i,this.Ca=n,this.E_=i.rightOffset,this.B_=i.barSpacing,this.$i=t,this.V_()}var i=t.prototype;return i.F=function(){return this.us},i.I_=function(t){F(this.Ca,t),this.L_(),this.V_()},i.mh=function(t,i){var n;F(this.us,t),this.us.fixLeftEdge&&this.F_(),this.us.fixRightEdge&&this.z_(),void 0!==t.barSpacing&&this.$i.Xs(t.barSpacing),void 0!==t.rightOffset&&this.$i.Ks(t.rightOffset),void 0!==t.minBarSpacing&&this.$i.Xs(null!==(n=t.barSpacing)&&void 0!==n?n:this.B_),this.L_(),this.V_(),this.O_.m()},i.vs=function(t){var i,n;return null!==(n=null===(i=this.y_[t])||void 0===i?void 0:i.ot)&&void 0!==n?n:null},i.Hi=function(t){var i;return null!==(i=this.y_[t])&&void 0!==i?i:null},i.El=function(t,i){if(this.y_.length<1)return null;if(t.e_>this.y_[this.y_.length-1].ot.e_)return i?this.y_.length-1:null;var n=_t(this.y_,t.e_,(function(t,i){return t.ot.e_<i}));return t.e_<this.y_[n].ot.e_?i?n:null:n},i.Fi=function(){return 0===this.Le||0===this.y_.length||null===this.S_},i.On=function(){return this.W_(),this.C_.b_()},i.j_=function(){return this.W_(),this.C_.g_()},i.H_=function(){var t=this.On();if(null===t)return null;var i={from:t.pn(),to:t.vn()};return this.U_(i)},i.U_=function(t){var i=Math.round(t.from),n=Math.round(t.to),s=p(this.q_()),e=p(this.Y_());return{from:p(this.vs(Math.max(s,i))),to:p(this.vs(Math.min(e,n)))}},i.X_=function(t){return{from:p(this.El(t.from,!0)),to:p(this.El(t.to,!0))}},i.Xt=function(){return this.Le},i.ko=function(t){if(isFinite(t)&&!(t<=0)&&this.Le!==t){var i=this.j_(),n=this.Le;if(this.Le=t,this.T_=!0,this.us.lockVisibleTimeRangeOnResize&&0!==n){var s=this.B_*t/n;this.B_=s}if(this.us.fixLeftEdge&&null!==i&&i.pn()<=0){var e=n-t;this.E_-=Math.round(e/this.B_)+1,this.T_=!0}this.K_(),this.Z_()}},i.Nt=function(t){if(this.Fi()||!O(t))return 0;var i=this.G_()+this.E_-t;return this.Le-(i+.5)*this.B_-1},i.Nn=function(t,i){for(var n=this.G_(),s=void 0===i?0:i.from,e=void 0===i?t.length:i.to,h=s;h<e;h++){var r=t[h].ot,o=n+this.E_-r,u=this.Le-(o+.5)*this.B_-1;t[h].nt=u}},i.J_=function(t){return Math.ceil(this.Q_(t))},i.Ks=function(t){this.T_=!0,this.E_=t,this.Z_(),this.$i.tu(),this.$i.wh()},i.jn=function(){return this.B_},i.Xs=function(t){this.iu(t),this.Z_(),this.$i.tu(),this.$i.wh()},i.su=function(){return this.E_},i.ql=function(){if(this.Fi())return null;if(null!==this.A_)return this.A_;for(var t,i=this.B_,n=5*(this.$i.F().layout.fontSize+4),e=Math.round(n/i),h=p(this.On()),r=Math.max(h.pn(),h.pn()-e),o=Math.max(h.vn(),h.vn()-e),u=this.k_.p_(i,n),a=this.q_()+e,l=this.Y_()-e,f=this.nu(),c=this.us.fixLeftEdge||f,v=this.us.fixRightEdge||f,d=0,m=(0,s.Z)(u);!(t=m()).done;){var g=t.value;if(r<=g.Fn&&g.Fn<=o){var w=void 0;d<this.N_.length?((w=this.N_[d]).Wl=this.Nt(g.Fn),w.ra=this.eu(g),w.d_=g.d_):(w={ru:!1,Wl:this.Nt(g.Fn),ra:this.eu(g),d_:g.d_},this.N_.push(w)),this.B_>n/2&&!f?w.ru=!1:w.ru=c&&g.Fn<=a||v&&g.Fn>=l,d++}}return this.N_.length=d,this.A_=this.N_,this.N_},i.hu=function(){this.T_=!0,this.Xs(this.us.barSpacing),this.Ks(this.us.rightOffset)},i.lu=function(t){this.T_=!0,this.S_=t,this.Z_(),this.F_()},i.au=function(t,i){var n=this.Q_(t),s=this.jn(),e=s+i*(s/10);this.Xs(e),this.us.rightBarStaysOnScroll||this.Ks(this.su()+(n-this.Q_(t)))},i.Ja=function(t){this.Sa&&this.eo(),null===this.Ma&&null===this.R_&&(this.Fi()||(this.Ma=t,this.ou()))},i.Qa=function(t){if(null!==this.R_){var i=Dt(this.Le-t,0,this.Le),n=Dt(this.Le-p(this.Ma),0,this.Le);0!==i&&0!==n&&this.Xs(this.R_.jn*i/n)}},i.io=function(){null!==this.Ma&&(this.Ma=null,this._u())},i.so=function(t){null===this.Sa&&null===this.R_&&(this.Fi()||(this.Sa=t,this.ou()))},i.no=function(t){if(null!==this.Sa){var i=(this.Sa-t)/this.jn();this.E_=p(this.R_).su+i,this.T_=!0,this.Z_()}},i.eo=function(){null!==this.Sa&&(this.Sa=null,this._u())},i.uu=function(){this.cu(this.us.rightOffset)},i.cu=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.E_,e=performance.now();!function h(){var r=(performance.now()-e)/i,o=r>=1,u=o?t:s+(t-s)*r;n.Ks(u),o||setTimeout(h,20)}()},i.wt=function(t,i){this.T_=!0,this.y_=t,this.k_.__(t,i),this.Z_()},i.du=function(){return this.P_},i.fu=function(){return this.D_},i.pu=function(){return this.O_},i.G_=function(){return this.S_||0},i.vu=function(t){var i=t.a_();this.iu(this.Le/i),this.E_=t.vn()-this.G_(),this.Z_(),this.T_=!0,this.$i.tu(),this.$i.wh()},i.mu=function(){var t=this.q_(),i=this.Y_();null!==t&&null!==i&&this.vu(new rn(t,i+this.us.rightOffset))},i.wu=function(t){var i=new rn(t.from,t.to);this.vu(i)},i.Ui=function(t){return void 0!==this.Ca.timeFormatter?this.Ca.timeFormatter(t.f_):this.bu.Yo(new Date(1e3*t.ot.e_))},i.nu=function(){var t=this.$i.F(),i=t.handleScroll,n=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||n.axisDoubleClickReset||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)},i.q_=function(){return 0===this.y_.length?null:0},i.Y_=function(){return 0===this.y_.length?null:this.y_.length-1},i.gu=function(t){return(this.Le-1-t)/this.B_},i.Q_=function(t){var i=this.gu(t),n=this.G_()+this.E_-i;return Math.round(1e6*n)/1e6},i.iu=function(t){var i=this.B_;this.B_=t,this.K_(),i!==this.B_&&(this.T_=!0,this.Mu())},i.W_=function(){if(this.T_)if(this.T_=!1,this.Fi())this.Su(dn.M_());else{var t=this.G_(),i=this.Le/this.B_,n=this.E_+t,s=new rn(n-i+1,n);this.Su(new dn(s))}},i.K_=function(){var t=this.yu();if(this.B_<t&&(this.B_=t,this.T_=!0),0!==this.Le){var i=.5*this.Le;this.B_>i&&(this.B_=i,this.T_=!0)}},i.yu=function(){return this.us.fixLeftEdge&&this.us.fixRightEdge&&0!==this.y_.length?this.Le/this.y_.length:this.us.minBarSpacing},i.Z_=function(){var t=this.ku();this.E_>t&&(this.E_=t,this.T_=!0);var i=this.xu();null!==i&&this.E_<i&&(this.E_=i,this.T_=!0)},i.xu=function(){var t=this.q_(),i=this.S_;return null===t||null===i?null:t-i-1+(this.us.fixLeftEdge?this.Le/this.B_:Math.min(2,this.y_.length))},i.ku=function(){return this.us.fixRightEdge?0:this.Le/this.B_-Math.min(2,this.y_.length)},i.ou=function(){this.R_={jn:this.jn(),su:this.su()}},i._u=function(){this.R_=null},i.eu=function(t){var i=this,n=this.x_.get(t.d_);return void 0===n&&(n=new hn((function(t){return i.Cu(t)})),this.x_.set(t.d_,n)),n.Yo(t)},i.Cu=function(t){var i=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.d_,this.us.timeVisible,this.us.secondsVisible);return void 0!==this.us.tickMarkFormatter?this.us.tickMarkFormatter(t.f_,i,this.Ca.locale):function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var e=void 0===t.n_?new Date(1e3*t.e_):new Date(Date.UTC(t.n_.year,t.n_.month-1,t.n_.day));return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()).toLocaleString(n,s)}(t.ot,i,this.Ca.locale)},i.Su=function(t){var i=this.C_;this.C_=t,on(i.b_(),this.C_.b_())||this.P_.m(),on(i.g_(),this.C_.g_())||this.D_.m(),this.Mu()},i.Mu=function(){this.A_=null},i.L_=function(){this.Mu(),this.x_.clear()},i.V_=function(){var t=this.Ca.dateFormat;this.us.timeVisible?this.bu=new en({Ko:t,Zo:this.us.secondsVisible?"%h:%m:%s":"%h:%m",Go:"   ",Jo:this.Ca.locale}):this.bu=new tn(t,this.Ca.locale)},i.F_=function(){if(this.us.fixLeftEdge){var t=this.q_();if(null!==t){var i=this.On();if(null!==i){var n=i.pn()-t;if(n<0){var s=this.E_-n-1;this.Ks(s)}this.K_()}}}},i.z_=function(){this.Z_(),this.K_()},t}(),mn=function(t){function i(i){var n;return(n=t.call(this)||this).Tu=new Map,n.Et=i,n}(0,h.Z)(i,t);var n=i.prototype;return n.K=function(t){},n.G=function(t){if(this.Et.xt){t.save();for(var i,n=0,e=(0,s.Z)(this.Et.Pu);!(i=e()).done;){var h=i.value;if(0!==h.ti.length){t.font=h.P;var r=this.Du(t,h.ti);r>this.Et.Xt?h.au=this.Et.Xt/r:h.au=1,n+=h.Ou*h.au}}var o=0;switch(this.Et.Ru){case"top":o=0;break;case"center":o=Math.max((this.Et.Kt-n)/2,0);break;case"bottom":o=Math.max(this.Et.Kt-n,0)}t.fillStyle=this.Et.O;for(var u,a=(0,s.Z)(this.Et.Pu);!(u=a()).done;){var l=u.value;t.save();var f=0;switch(this.Et.Au){case"left":t.textAlign="left",f=l.Ou/2;break;case"center":t.textAlign="center",f=this.Et.Xt/2;break;case"right":t.textAlign="right",f=this.Et.Xt-1-l.Ou/2}t.translate(f,o),t.textBaseline="top",t.font=l.P,t.scale(l.au,l.au),t.fillText(l.ti,0,l.Nu),t.restore(),o+=l.Ou*l.au}t.restore()}},n.Du=function(t,i){var n=this.Eu(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},n.Eu=function(t){var i=this.Tu.get(t);return void 0===i&&(i=new Map,this.Tu.set(t,i)),i},i}(B),gn=function(){function t(t){this.ft=!0,this.Wt={xt:!1,O:"",Kt:0,Xt:0,Pu:[],Ru:"center",Au:"center"},this.jt=new mn(this.Wt),this.$t=t}var i=t.prototype;return i.wt=function(){this.ft=!0},i.gt=function(t,i){return this.ft&&(this.Mt(t,i),this.ft=!1),this.jt},i.Mt=function(t,i){var n=this.$t.F(),s=this.Wt;s.xt=n.visible,s.xt&&(s.O=n.color,s.Xt=i,s.Kt=t,s.Au=n.horzAlign,s.Ru=n.vertAlign,s.Pu=[{ti:n.text,P:N(n.fontSize,n.fontFamily,n.fontStyle),Ou:1.2*n.fontSize,Nu:0,au:0}])},t}(),wn=function(t){function i(i,n){var s;return(s=t.call(this)||this).us=n,s.bs=new gn(e(s)),s}(0,h.Z)(i,t);var n=i.prototype;return n.Ds=function(){return[]},n.Ps=function(){return[this.bs]},n.F=function(){return this.us},n.Rs=function(){this.bs.wt()},i}(rt);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(an||(an={}));var bn=function(){function t(t,i){this.Bu=[],this.Vu=[],this.Le=0,this.Iu=null,this.Lu=null,this.Fu=new S,this.zu=new S,this.Wu=null,this.ju=t,this.us=i,this.$u=new P(this),this.co=new pn(this,i.timeScale,this.us.localization),this.vt=new ot(this,i.crosshair),this.Hu=new Ri(i.crosshair),this.Uu=new wn(this,i.watermark),this.qu(),this.Bu[0].yo(2e3),this.Yu=this.Xu(0),this.Ku=this.Xu(1)}var i=t.prototype;return i.ol=function(){this.Zu(new at(3))},i.wh=function(){this.Zu(new at(2))},i.Sl=function(){this.Zu(new at(1))},i._l=function(t){var i=this.Gu(t);this.Zu(i)},i.Ju=function(){return this.Lu},i.Qu=function(t){var i=this.Lu;this.Lu=t,null!==i&&this._l(i.tc),null!==t&&this._l(t.tc)},i.F=function(){return this.us},i.mh=function(t){F(this.us,t),this.Bu.forEach((function(i){return i.wo(t)})),void 0!==t.timeScale&&this.co.mh(t.timeScale),void 0!==t.localization&&this.co.I_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Fu.m(),this.Yu=this.Xu(0),this.Ku=this.Xu(1),this.ol()},i.ic=function(t,i){if("left"!==t)if("right"!==t){var n=this.sc(t);null!==n&&(n.Dt.mh(i),this.Fu.m())}else this.mh({rightPriceScale:i});else this.mh({leftPriceScale:i})},i.sc=function(t){for(var i,n=(0,s.Z)(this.Bu);!(i=n()).done;){var e=i.value,h=e.bo(t);if(null!==h)return{Ht:e,Dt:h}}return null},i.yt=function(){return this.co},i.nc=function(){return this.Bu},i.ec=function(){return this.Uu},i.rc=function(){return this.vt},i.hc=function(){return this.zu},i.lc=function(t,i){t.La(i),this.tu()},i.ko=function(t){this.Le=t,this.co.ko(this.Le),this.Bu.forEach((function(i){return i.ko(t)})),this.tu()},i.qu=function(t){var i=new Yi(this.co,this);void 0!==t?this.Bu.splice(t,0,i):this.Bu.push(i);var n=void 0===t?this.Bu.length-1:t,s=new at(3);return s.Fs(n,{zs:0,Ws:!0}),this.Zu(s),i},i.Ao=function(t,i,n){t.Ao(i,n)},i.No=function(t,i,n){t.No(i,n),this.ul(),this.Zu(this.ac(t,2))},i.Eo=function(t,i){t.Eo(i),this.Zu(this.ac(t,2))},i.Bo=function(t,i,n){i.Aa()||t.Bo(i,n)},i.Vo=function(t,i,n){i.Aa()||(t.Vo(i,n),this.ul(),this.Zu(this.ac(t,2)))},i.Io=function(t,i){i.Aa()||(t.Io(i),this.Zu(this.ac(t,2)))},i.Fo=function(t,i){t.Fo(i),this.Zu(this.ac(t,2))},i.oc=function(t){this.co.Ja(t)},i._c=function(t,i){var n=this.yt();if(!n.Fi()&&0!==i){var s=n.Xt();t=Math.max(1,Math.min(t,s)),n.au(t,i),this.tu()}},i.uc=function(t){this.cc(0),this.dc(t),this.fc()},i.vc=function(t){this.co.Qa(t),this.tu()},i.mc=function(){this.co.io(),this.wh()},i.cc=function(t){this.Iu=t,this.co.so(t)},i.dc=function(t){var i=!1;return null!==this.Iu&&Math.abs(t-this.Iu)>20&&(this.Iu=null,i=!0),this.co.no(t),this.tu(),i},i.fc=function(){this.co.eo(),this.wh(),this.Iu=null},i.bt=function(){return this.Vu},i.wc=function(t,i,n){this.vt.gs(t,i);var s=NaN,e=this.co.J_(t),h=this.co.On();null!==h&&(e=Math.min(Math.max(h.pn(),e),h.vn()));var r=n.fs(),o=r.Ct();null!==o&&(s=r.ps(i,o)),s=this.Hu.Bl(s,e,n),this.vt.ks(e,s,n),this.Sl(),this.zu.m(this.vt.St(),{x:t,y:i})},i.bc=function(){this.rc().Cs(),this.Sl(),this.zu.m(null,null)},i.ul=function(){var t=this.vt.Ht();if(null!==t){var i=this.vt.Ss(),n=this.vt.ys();this.wc(i,n,t)}this.vt.Rs()},i.gc=function(t,i,n){var s=this.co.vs(0);void 0!==i&&void 0!==n&&this.co.wt(i,n);var e=this.co.vs(0),h=this.co.G_(),r=this.co.On();if(null!==r&&null!==s&&null!==e){var o=r.kr(h),u=s.e_>e.e_,a=null!==t&&t>h&&!u,l=o&&this.co.F().shiftVisibleRangeOnNewBar;if(a&&!l){var f=t-h;this.co.Ks(this.co.su()-f)}}this.co.lu(t)},i.fl=function(t){null!==t&&t.Wo()},i.$e=function(t){var i=this.Bu.find((function(i){return i.qa().includes(t)}));return void 0===i?null:i},i.tu=function(){this.Uu.Rs(),this.Bu.forEach((function(t){return t.Wo()})),this.ul()},i.M=function(){this.Bu.forEach((function(t){return t.M()})),this.Bu.length=0,this.us.localization.priceFormatter=void 0,this.us.localization.timeFormatter=void 0},i.Mc=function(){return this.$u},i.Ye=function(){return this.$u.F()},i.Mo=function(){return this.Fu},i.Sc=function(t,i){var n=this.Bu[0],s=this.yc(i,t,n);return this.Vu.push(s),1===this.Vu.length?this.ol():this.wh(),s},i.kc=function(t){var i=this.$e(t),n=this.Vu.indexOf(t);v(-1!==n,"Series not found"),this.Vu.splice(n,1),p(i).Ka(t),t.M&&t.M()},i.al=function(t,i){var n=p(this.$e(t));n.Ka(t);var s=this.sc(i);if(null===s){var e=t.Xi();n.Ya(t,i,e)}else{var h=s.Ht===n?t.Xi():void 0;s.Ht.Ya(t,i,h)}},i.mu=function(){var t=new at(2);t.Hs(),this.Zu(t)},i.xc=function(t){var i=new at(2);i.qs(t),this.Zu(i)},i.Ys=function(){var t=new at(2);t.Ys(),this.Zu(t)},i.Xs=function(t){var i=new at(2);i.Xs(t),this.Zu(i)},i.Ks=function(t){var i=new at(2);i.Ks(t),this.Zu(i)},i.Cc=function(){return this.us.rightPriceScale.visible?"right":"left"},i.Tc=function(){return this.Ku},i.U=function(){return this.Yu},i.At=function(t){var i=this.Ku,n=this.Yu;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Wu||this.Wu.un!==n||this.Wu.cn!==i)this.Wu={un:n,cn:i,Pc:new Map};else{var s=this.Wu.Pc.get(t);if(void 0!==s)return s}var e=function(t,i,n){var s=E(t),e=s[0],h=s[1],r=s[2],o=s[3],u=E(i),a=u[0],l=u[1],f=u[2],c=u[3],v=[w(e+n*(a-e)),w(h+n*(l-h)),w(r+n*(f-r)),b(o+n*(c-o))];return"rgba("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+")"}(n,i,t/100);return this.Wu.Pc.set(t,e),e},i.ac=function(t,i){var n=new at(i);if(null!==t){var s=this.Bu.indexOf(t);n.Fs(s,{zs:i})}return n},i.Gu=function(t,i){return void 0===i&&(i=2),this.ac(this.$e(t),i)},i.Zu=function(t){this.ju&&this.ju(t),this.Bu.forEach((function(t){return t.$o().bh().wt()}))},i.yc=function(t,i,n){var s=new Ti(this,t,i),e=void 0!==t.priceScaleId?t.priceScaleId:this.Cc();return n.Ya(s,e),ut(e)||s.mh(t),s},i.Xu=function(t){var i=this.us.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}();function yn(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function Mn(t){return!L(t)&&!T(t)}function _n(t){return L(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(ln||(ln={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(fn||(fn={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(cn||(cn={}));var Cn=function(){function t(t,i){this.It=t,this.Lt=i}return t.prototype.Gr=function(t){return this.It===t.It&&this.Lt===t.Lt},t}();function En(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function xn(t){var i=p(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function Sn(t,i){var n=t.createElement("canvas"),s=En(n);return n.style.width=i.It+"px",n.style.height=i.Lt+"px",n.width=i.It*s,n.height=i.Lt*s,n}function Fn(t,i){var n=p(t.ownerDocument).createElement("canvas");t.appendChild(n);var s,e=(void 0===(s={allowDownsampling:!1})&&(s=r),new l(n,s));return e.resizeCanvas({width:i.It,height:i.Lt}),e}function Ln(t,i){return t.Dc-i.Dc}function On(t,i,n){var s=(t.Dc-i.Dc)/(t.ot-i.ot);return Math.sign(s)*Math.min(Math.abs(s),n)}var Tn=function(){function t(t,i,n,s){this.Oc=null,this.Rc=null,this.Ac=null,this.Nc=null,this.Ec=null,this.Bc=0,this.Vc=0,this.Ic=!1,this.Lc=t,this.Fc=i,this.zc=n,this.Qs=s}var i=t.prototype;return i.Wc=function(t,i){if(null!==this.Oc){if(this.Oc.ot===i)return void(this.Oc.Dc=t);if(Math.abs(this.Oc.Dc-t)<this.Qs)return}this.Nc=this.Ac,this.Ac=this.Rc,this.Rc=this.Oc,this.Oc={ot:i,Dc:t}},i.nr=function(t,i){if(null!==this.Oc&&null!==this.Rc&&!(i-this.Oc.ot>50)){var n=0,s=On(this.Oc,this.Rc,this.Fc),e=Ln(this.Oc,this.Rc),h=[s],r=[e];if(n+=e,null!==this.Ac){var o=On(this.Rc,this.Ac,this.Fc);if(Math.sign(o)===Math.sign(s)){var u=Ln(this.Rc,this.Ac);if(h.push(o),r.push(u),n+=u,null!==this.Nc){var a=On(this.Ac,this.Nc,this.Fc);if(Math.sign(a)===Math.sign(s)){var l=Ln(this.Ac,this.Nc);h.push(a),r.push(l),n+=l}}}}for(var f=0,c=0;c<h.length;++c)f+=r[c]/n*h[c];Math.abs(f)<this.Lc||(this.Ec={Dc:t,ot:i},this.Vc=f,this.Bc=function(t,i){var n=Math.log(i);return Math.log(1*n/-t)/n}(Math.abs(f),this.zc))}},i.jc=function(t){var i=p(this.Ec),n=t-i.ot;return i.Dc+this.Vc*(Math.pow(this.zc,n)-1)/Math.log(this.zc)},i.$c=function(t){return null===this.Ec||this.Hc(t)===this.Bc},i.Uc=function(){return this.Ic},i.qc=function(){this.Ic=!0},i.Hc=function(t){var i=t-p(this.Ec).ot;return Math.min(i,this.Bc)},t}(),Rn="undefined"!=typeof window;function In(){return!!Rn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Dn(){return!!Rn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var kn=function(){function t(t,i,n){var s=this;this.Yc=0,this.Xc=null,this.Kc={nt:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.Zc=0,this.Gc=null,this.Jc={nt:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY},this.Qc=null,this.td=!1,this.sd=null,this.nd=null,this.ed=!1,this.rd=!1,this.hd=!1,this.ld=null,this.ad=null,this.od=null,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=0,this.vd=!1,this.md=!1,this.wd=!1,this.bd=0,this.gd=null,this.Md=!Dn(),this.Sd=function(t){s.yd(t)},this.kd=function(t){if(s.xd(t)){var i=s.Cd(t);if(++s.Zc,s.Gc&&s.Zc>1)s.Pd(Pn(t),s.Jc).Td<30&&!s.hd&&s.Dd(i,s.Rd.Od),s.Ad()}else{var n=s.Cd(t);if(++s.Yc,s.Xc&&s.Yc>1)s.Pd(Pn(t),s.Kc).Td<5&&!s.rd&&s.Nd(n,s.Rd.Ed),s.Bd()}},this.Vd=t,this.Rd=i,this.us=n,this.Id()}var i=t.prototype;return i.M=function(){null!==this.ld&&(this.ld(),this.ld=null),null!==this.ad&&(this.ad(),this.ad=null),null!==this._d&&(this._d(),this._d=null),null!==this.ud&&(this.ud(),this.ud=null),null!==this.dd&&(this.dd(),this.dd=null),null!==this.od&&(this.od(),this.od=null),this.Ld(),this.Bd()},i.Fd=function(t){var i=this;this._d&&this._d();var n=this.zd.bind(this);if(this._d=function(){i.Vd.removeEventListener("mousemove",n)},this.Vd.addEventListener("mousemove",n),!this.xd(t)){var s=this.Cd(t);this.Nd(s,this.Rd.Wd),this.Md=!0}},i.Bd=function(){null!==this.Xc&&clearTimeout(this.Xc),this.Yc=0,this.Xc=null,this.Kc={nt:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}},i.Ad=function(){null!==this.Gc&&clearTimeout(this.Gc),this.Zc=0,this.Gc=null,this.Jc={nt:Number.NEGATIVE_INFINITY,et:Number.POSITIVE_INFINITY}},i.zd=function(t){if(!this.wd&&null===this.nd&&!this.xd(t)){var i=this.Cd(t);this.Nd(i,this.Rd.jd),this.Md=!0}},i.$d=function(t){var i=Bn(t.changedTouches,p(this.gd));if(null!==i&&(this.bd=Vn(t),null===this.fd&&!this.md)){this.vd=!0;var n=this.Pd(Pn(i),p(this.nd)),s=n.Hd,e=n.Ud,h=n.Td;if(this.ed||!(h<5)){if(!this.ed){var r=.5*s,o=e>=r&&!this.us.qd(),u=r>e&&!this.us.Yd();o||u||(this.md=!0),this.ed=!0,this.hd=!0,this.Ld(),this.Ad()}if(!this.md){var a=this.Cd(t,i);this.Dd(a,this.Rd.Xd),Nn(t)}}}},i.Kd=function(t){if(0===t.button&&(this.Pd(Pn(t),p(this.sd)).Td>=5&&(this.rd=!0,this.Bd()),this.rd)){var i=this.Cd(t);this.Nd(i,this.Rd.Zd)}},i.Pd=function(t,i){var n=Math.abs(i.nt-t.nt),s=Math.abs(i.et-t.et);return{Hd:n,Ud:s,Td:n+s}},i.Gd=function(t){var i=Bn(t.changedTouches,p(this.gd));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.gd=null,this.bd=Vn(t),this.Ld(),this.nd=null,this.dd&&(this.dd(),this.dd=null);var n=this.Cd(t,i);if(this.Dd(n,this.Rd.Jd),++this.Zc,this.Gc&&this.Zc>1)this.Pd(Pn(i),this.Jc).Td<30&&!this.hd&&this.Dd(n,this.Rd.Od),this.Ad();else this.hd||(this.Dd(n,this.Rd.Qd),this.Rd.Qd&&Nn(t));0===this.Zc&&Nn(t),0===t.touches.length&&this.td&&(this.td=!1,Nn(t))}},i.yd=function(t){if(0===t.button){var i=this.Cd(t);if(this.sd=null,this.wd=!1,this.ud&&(this.ud(),this.ud=null),In()&&this.Vd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Sd),!this.xd(t))if(this.Nd(i,this.Rd.tf),++this.Yc,this.Xc&&this.Yc>1){this.Pd(Pn(t),this.Kc).Td<5&&!this.rd&&this.Nd(i,this.Rd.Ed),this.Bd()}else this.rd||this.Nd(i,this.Rd.if)}},i.Ld=function(){null!==this.Qc&&(clearTimeout(this.Qc),this.Qc=null)},i.sf=function(t){if(null===this.gd){var i=t.changedTouches[0];this.gd=i.identifier,this.bd=Vn(t);var n=this.Vd.ownerDocument.documentElement;this.hd=!1,this.ed=!1,this.md=!1,this.nd=Pn(i),this.dd&&(this.dd(),this.dd=null);var s=this.$d.bind(this),e=this.Gd.bind(this);this.dd=function(){n.removeEventListener("touchmove",s),n.removeEventListener("touchend",e)},n.addEventListener("touchmove",s,{passive:!1}),n.addEventListener("touchend",e,{passive:!1}),this.Ld(),this.Qc=setTimeout(this.nf.bind(this,t),240);var h=this.Cd(t,i);this.Dd(h,this.Rd.ef),this.Gc||(this.Zc=0,this.Gc=setTimeout(this.Ad.bind(this),500),this.Jc=Pn(i))}},i.rf=function(t){if(0===t.button){var i=this.Vd.ownerDocument.documentElement;In()&&i.addEventListener("mouseleave",this.Sd),this.rd=!1,this.sd=Pn(t),this.ud&&(this.ud(),this.ud=null);var n=this.Kd.bind(this),s=this.yd.bind(this);if(this.ud=function(){i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",s)},i.addEventListener("mousemove",n),i.addEventListener("mouseup",s),this.wd=!0,!this.xd(t)){var e=this.Cd(t);this.Nd(e,this.Rd.hf),this.Xc||(this.Yc=0,this.Xc=setTimeout(this.Bd.bind(this),500),this.Kc=Pn(t))}}},i.Id=function(){var t=this;this.Vd.addEventListener("mouseenter",this.Fd.bind(this)),this.Vd.addEventListener("touchcancel",this.Ld.bind(this));var i=this.Vd.ownerDocument,n=function(i){t.Rd.lf&&(i.composed&&t.Vd.contains(i.composedPath()[0])||i.target&&t.Vd.contains(i.target)||t.Rd.lf())};this.ad=function(){i.removeEventListener("touchstart",n)},this.ld=function(){i.removeEventListener("mousedown",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),Dn()&&(this.od=function(){t.Vd.removeEventListener("dblclick",t.kd)},this.Vd.addEventListener("dblclick",this.kd)),this.Vd.addEventListener("mouseleave",this.af.bind(this)),this.Vd.addEventListener("touchstart",this.sf.bind(this),{passive:!0}),function(t){Rn&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}(this.Vd),this.Vd.addEventListener("mousedown",this.rf.bind(this)),this._f(),this.Vd.addEventListener("touchmove",(function(){}),{passive:!1})},i._f=function(){var t=this;void 0===this.Rd.uf&&void 0===this.Rd.cf&&void 0===this.Rd.df||(this.Vd.addEventListener("touchstart",(function(i){return t.ff(i.touches)}),{passive:!0}),this.Vd.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.fd&&void 0!==t.Rd.cf){var n=$n(i.touches[0],i.touches[1])/t.pd;t.Rd.cf(t.fd,n),Nn(i)}}),{passive:!1}),this.Vd.addEventListener("touchend",(function(i){t.ff(i.touches)})))},i.ff=function(t){1===t.length&&(this.vd=!1),2!==t.length||this.vd||this.td?this.pf():this.vf(t)},i.vf=function(t){var i=this.Vd.getBoundingClientRect()||{left:0,top:0};this.fd={nt:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,et:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.pd=$n(t[0],t[1]),void 0!==this.Rd.uf&&this.Rd.uf(),this.Ld()},i.pf=function(){null!==this.fd&&(this.fd=null,void 0!==this.Rd.df&&this.Rd.df())},i.af=function(t){if(this._d&&this._d(),!this.xd(t)&&this.Md){var i=this.Cd(t);this.Nd(i,this.Rd.mf),this.Md=!Dn()}},i.nf=function(t){var i=Bn(t.touches,p(this.gd));if(null!==i){var n=this.Cd(t,i);this.Dd(n,this.Rd.wf),this.hd=!0,this.td=!0}},i.xd=function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Vn(t)<this.bd+500},i.Dd=function(t,i){i&&i.call(this.Rd,t)},i.Nd=function(t,i){i&&i.call(this.Rd,t)},i.Cd=function(t,i){var n=i||t,s=this.Vd.getBoundingClientRect()||{left:0,top:0};return{bf:n.clientX,gf:n.clientY,Mf:n.pageX,Sf:n.pageY,yf:n.screenX,kf:n.screenY,xf:n.clientX-s.left,Cf:n.clientY-s.top,Tf:t.ctrlKey,Pf:t.altKey,Df:t.shiftKey,Of:t.metaKey,Rf:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,Af:t.type,Nf:n.target,Ef:t.view,Bf:function(){"touchstart"!==t.type&&Nn(t)}}},t}();function $n(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function Nn(t){t.cancelable&&t.preventDefault()}function Pn(t){return{nt:t.pageX,et:t.pageY}}function Vn(t){return t.timeStamp||performance.now()}function Bn(t,i){for(var n=0;n<t.length;++n)if(t[n].identifier===i)return t[n];return null}var Un=function(){function t(t,i,n,s){this.Fe=new Kt(200),this.W=0,this.Vf="",this.Tr="",this.If=[],this.Lf=new Map,this.W=t,this.Vf=i,this.Tr=N(t,n,s)}var i=t.prototype;return i.M=function(){this.Fe.Ae(),this.If=[],this.Lf.clear()},i.Ff=function(t,i,n,s,e){var h=this.zf(t,i);if("left"!==e){var r=En(t.canvas);n-=Math.floor(h.Wf*r)}s-=Math.floor(h.Kt/2),t.drawImage(h.jf,n,s,h.Xt,h.Kt)},i.zf=function(t,i){var n,s=this;if(this.Lf.has(i))n=d(this.Lf.get(i));else{if(this.If.length>=200){var e=d(this.If.shift());this.Lf.delete(e)}var h=En(t.canvas),r=Math.round(this.W/10),o=Math.ceil(this.Fe.Mi(t,i)),u=Nt(Math.round(o)+4),a=Nt(this.W),l=Sn(document,new Cn(u,a));n={ti:i,Wf:Math.round(Math.max(1,o)),Xt:Math.ceil(u*h),Kt:Math.ceil(a*h),jf:l},0!==o&&(this.If.push(n.ti),this.Lf.set(n.ti,n)),X(t=xn(n.jf),h,(function(){t.font=s.Tr,t.fillStyle=s.Vf,t.fillText(i,0,a-r)}))}return n},t}(),zn=function(){function t(t,i,n,s){var e=this;this.Ii=null,this.$f=null,this.Hf=!1,this.Uf=new Kt(50),this.qf=new Un(11,"#000"),this.Vf=null,this.Tr=null,this.Yf=0,this.Xf=!1,this.Kf=function(){e.Zf(e.$u.F()),e.Xf||e.Qi.Gf().Ut().wh()},this.Jf=function(){e.Xf||e.Qi.Gf().Ut().wh()},this.Qi=t,this.us=i,this.$u=n,this.Qf="left"===s,this.tp=document.createElement("div"),this.tp.style.height="100%",this.tp.style.overflow="hidden",this.tp.style.width="25px",this.tp.style.left="0",this.tp.style.position="relative",this.ip=Fn(this.tp,new Cn(16,16)),this.ip.subscribeCanvasConfigured(this.Kf);var h=this.ip.canvas;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.sp=Fn(this.tp,new Cn(16,16)),this.sp.subscribeCanvasConfigured(this.Jf);var r=this.sp.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";var o={hf:this.np.bind(this),ef:this.np.bind(this),Zd:this.ep.bind(this),Xd:this.ep.bind(this),lf:this.rp.bind(this),tf:this.hp.bind(this),Jd:this.hp.bind(this),Ed:this.lp.bind(this),Od:this.lp.bind(this),Wd:this.ap.bind(this),mf:this.op.bind(this)};this._p=new kn(this.sp.canvas,o,{qd:function(){return!1},Yd:function(){return!0}})}var i=t.prototype;return i.M=function(){this._p.M(),this.sp.unsubscribeCanvasConfigured(this.Jf),this.sp.destroy(),this.ip.unsubscribeCanvasConfigured(this.Kf),this.ip.destroy(),null!==this.Ii&&this.Ii.Ga().v(this),this.Ii=null,this.qf.M()},i.up=function(){return this.tp},i.lt=function(){return p(this.Ii).F().borderColor},i.cp=function(){return this.us.textColor},i.T=function(){return this.us.fontSize},i.dp=function(){return N(this.T(),this.us.fontFamily)},i.fp=function(){var t=this.$u.F(),i=this.Vf!==t.O,n=this.Tr!==t.P;return(i||n)&&(this.Zf(t),this.Vf=t.O),n&&(this.Uf.Ae(),this.Tr=t.P),t},i.pp=function(){if(null===this.Ii)return 0;var t=0,i=this.fp(),n=xn(this.ip.canvas),s=this.Ii.ql();n.font=this.dp(),s.length>0&&(t=Math.max(this.Uf.Mi(n,s[0].ra),this.Uf.Mi(n,s[s.length-1].ra)));for(var e=this.vp(),h=e.length;h--;){var r=this.Uf.Mi(n,e[h].ti());r>t&&(t=r)}var o=this.Ii.Ct();if(null!==o&&null!==this.$f){var u=this.Ii.ps(1,o),a=this.Ii.ps(this.$f.Lt-2,o);t=Math.max(t,this.Uf.Mi(n,this.Ii.zi(Math.floor(Math.min(u,a))+.11111111111111,o)),this.Uf.Mi(n,this.Ii.zi(Math.ceil(Math.max(u,a))-.11111111111111,o)))}var l=t||34,f=Math.ceil(i.k+i.C+i.N+i.B+5+l);return f+=f%2},i.mp=function(t){if(t.It<0||t.Lt<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.$f&&this.$f.Gr(t)||(this.$f=t,this.Xf=!0,this.ip.resizeCanvas({width:t.It,height:t.Lt}),this.sp.resizeCanvas({width:t.It,height:t.Lt}),this.Xf=!1,this.tp.style.width=t.It+"px",this.tp.style.height=t.Lt+"px",this.tp.style.minWidth=t.It+"px")},i.wp=function(){return p(this.$f).It},i.Zi=function(t){this.Ii!==t&&(null!==this.Ii&&this.Ii.Ga().v(this),this.Ii=t,t.Ga().l(this.va.bind(this),this))},i.Dt=function(){return this.Ii},i.Ae=function(){var t=this.Qi.bp();this.Qi.Gf().Ut().Fo(t,p(this.Dt()))},i.gp=function(t){if(null!==this.$f){if(1!==t){var i=xn(this.ip.canvas);this.Mp(),this.Sp(i,this.ip.pixelRatio),this.fe(i,this.ip.pixelRatio),this.yp(i,this.ip.pixelRatio),this.kp(i,this.ip.pixelRatio)}var n=xn(this.sp.canvas),s=this.$f.It,e=this.$f.Lt;X(n,this.sp.pixelRatio,(function(){n.clearRect(0,0,s,e)})),this.xp(n,this.sp.pixelRatio)}},i.Cp=function(){return this.ip.canvas},i.wt=function(){var t;null===(t=this.Ii)||void 0===t||t.ql()},i.np=function(t){if(null!==this.Ii&&!this.Ii.Fi()&&this.Qi.Gf().F().handleScale.axisPressedMouseMove.price){var i=this.Qi.Gf().Ut(),n=this.Qi.bp();this.Hf=!0,i.Ao(n,this.Ii,t.Cf)}},i.ep=function(t){if(null!==this.Ii&&this.Qi.Gf().F().handleScale.axisPressedMouseMove.price){var i=this.Qi.Gf().Ut(),n=this.Qi.bp(),s=this.Ii;i.No(n,s,t.Cf)}},i.rp=function(){if(null!==this.Ii&&this.Qi.Gf().F().handleScale.axisPressedMouseMove.price){var t=this.Qi.Gf().Ut(),i=this.Qi.bp(),n=this.Ii;this.Hf&&(this.Hf=!1,t.Eo(i,n))}},i.hp=function(t){if(null!==this.Ii&&this.Qi.Gf().F().handleScale.axisPressedMouseMove.price){var i=this.Qi.Gf().Ut(),n=this.Qi.bp();this.Hf=!1,i.Eo(n,this.Ii)}},i.lp=function(t){this.Qi.Gf().F().handleScale.axisDoubleClickReset&&this.Ae()},i.ap=function(t){null!==this.Ii&&(!this.Qi.Gf().Ut().F().handleScale.axisPressedMouseMove.price||this.Ii.qr()||this.Ii.Na()||this.Tp(1))},i.op=function(t){this.Tp(0)},i.vp=function(){var t=this,i=[],n=null===this.Ii?void 0:this.Ii;return function(s){for(var e=0;e<s.length;++e)for(var h=s[e].Ds(t.Qi.bp(),n),r=0;r<h.length;r++)i.push(h[r])}(this.Qi.bp().qa()),i},i.Sp=function(t,i){var n=this;if(null!==this.$f){var s=this.$f.It,e=this.$f.Lt;X(t,i,(function(){var i=n.Qi.bp().Ut(),h=i.U(),r=i.Tc();h===r?J(t,0,0,s,e,h):Y(t,0,0,s,e,h,r)}))}},i.fe=function(t,i){if(null!==this.$f&&null!==this.Ii&&this.Ii.F().borderVisible){t.save(),t.fillStyle=this.lt();var n,s=Math.max(1,Math.floor(this.fp().k*i));n=this.Qf?Math.floor(this.$f.It*i)-s:0,t.fillRect(n,0,s,Math.ceil(this.$f.Lt*i)),t.restore()}},i.yp=function(t,i){if(null!==this.$f&&null!==this.Ii){var n=this.Ii.ql();t.save(),t.strokeStyle=this.lt(),t.font=this.dp(),t.fillStyle=this.lt();var e=this.fp(),h=this.Qf?Math.floor((this.$f.It-e.C)*i):0,r=this.Qf?Math.round(h-e.N*i):Math.round(h+e.C*i+e.N*i),o=this.Qf?"right":"left",u=Math.max(1,Math.floor(i)),a=Math.floor(.5*i),l=this.Ii.F();if(l.borderVisible&&l.ticksVisible){var f=Math.round(e.C*i);t.beginPath();for(var c,v=(0,s.Z)(n);!(c=v()).done;){var d=c.value;t.rect(h,Math.round(d.Wl*i)-a,f,u)}t.fill()}t.fillStyle=this.cp();for(var p,m=(0,s.Z)(n);!(p=m()).done;){var g=p.value;this.qf.Ff(t,g.ra,r,Math.round(g.Wl*i),o)}t.restore()}},i.Mp=function(){if(null!==this.$f&&null!==this.Ii){var t=this.$f.Lt/2,i=[],n=this.Ii.qa().slice(),s=this.Qi.bp(),e=this.fp();this.Ii===s.Ue()&&this.Qi.bp().qa().forEach((function(t){s.He(t)&&n.push(t)}));var h=this.Ii.Vl()[0],r=this.Ii;n.forEach((function(n){var e=n.Ds(s,r);e.forEach((function(t){t.Ai(null),t.Ni()&&i.push(t)})),h===n&&e.length>0&&(t=e[0].yi())}));var o=i.filter((function(i){return i.yi()<=t})),u=i.filter((function(i){return i.yi()>t}));if(o.sort((function(t,i){return i.yi()-t.yi()})),o.length&&u.length&&u.push(o[0]),u.sort((function(t,i){return t.yi()-i.yi()})),i.forEach((function(t){return t.Ai(t.yi())})),this.Ii.F().alignLabels){for(var a=1;a<o.length;a++){var l=o[a],f=o[a-1],c=f.Kt(e,!1),v=l.yi(),d=f.Ri();v>d-c&&l.Ai(d-c)}for(var p=1;p<u.length;p++){var m=u[p],g=u[p-1],w=g.Kt(e,!0),b=m.yi(),y=g.Ri();b<y+w&&m.Ai(y+w)}}}},i.kp=function(t,i){var n=this;if(null!==this.$f){t.save();var s=this.$f,e=this.vp(),h=this.fp(),r=this.Qf?"right":"left";e.forEach((function(e){if(e.Ei()){var o=e.gt(p(n.Ii));t.save(),o.X(t,h,n.Uf,s.It,r,i),t.restore()}})),t.restore()}},i.xp=function(t,i){var n=this;if(null!==this.$f&&null!==this.Ii){t.save();var s=this.$f,e=this.Qi.Gf().Ut(),h=[],r=this.Qi.bp(),o=e.rc().Ds(r,this.Ii);o.length&&h.push(o);var u=this.fp(),a=this.Qf?"right":"left";h.forEach((function(e){e.forEach((function(e){t.save(),e.gt(p(n.Ii)).X(t,u,n.Uf,s.It,a,i),t.restore()}))})),t.restore()}},i.Tp=function(t){this.tp.style.cursor=1===t?"ns-resize":"default"},i.va=function(){var t=this.pp();this.Yf<t&&this.Qi.Gf().Ut().ol(),this.Yf=t},i.Zf=function(t){this.qf.M(),this.qf=new Un(t.T,t.O,t.D)},t}();function Zn(t,i,n,s,e){t.Z&&t.Z(i,n,s,e)}function jn(t,i,n,s,e){t.X(i,n,s,e)}function Wn(t,i){return t.Ps(i)}function An(t,i){return t.Gi(i)}function Gn(t,i){return void 0!==t.Ml?t.Ml(i):[]}var Xn=function(){function t(t,i){var n=this;this.$f=new Cn(0,0),this.Pp=null,this.Dp=null,this.Op=null,this.Rp=!1,this.Ap=new S,this.Np=0,this.Ep=!1,this.Bp=null,this.Vp=!1,this.Ip=null,this.Lp=null,this.Xf=!1,this.Kf=function(){n.Xf||null===n.Fp||n.$i().wh()},this.Jf=function(){n.Xf||null===n.Fp||n.$i().wh()},this.zp=t,this.Fp=i,this.Fp.jo().l(this.Wp.bind(this),this,!0),this.jp=document.createElement("td"),this.jp.style.padding="0",this.jp.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.$p=document.createElement("td"),this.$p.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.jp.appendChild(s),this.ip=Fn(s,new Cn(16,16)),this.ip.subscribeCanvasConfigured(this.Kf);var e=this.ip.canvas;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.sp=Fn(s,new Cn(16,16)),this.sp.subscribeCanvasConfigured(this.Jf);var h=this.sp.canvas;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.Up=document.createElement("tr"),this.Up.appendChild(this.$p),this.Up.appendChild(this.jp),this.Up.appendChild(this.Hp),this.qp(),this._p=new kn(this.sp.canvas,this,{qd:function(){return null===n.Bp&&!n.zp.F().handleScroll.vertTouchDrag},Yd:function(){return null===n.Bp&&!n.zp.F().handleScroll.horzTouchDrag}})}var i=t.prototype;return i.M=function(){null!==this.Pp&&this.Pp.M(),null!==this.Dp&&this.Dp.M(),this.sp.unsubscribeCanvasConfigured(this.Jf),this.sp.destroy(),this.ip.unsubscribeCanvasConfigured(this.Kf),this.ip.destroy(),null!==this.Fp&&this.Fp.jo().v(this),this._p.M()},i.bp=function(){return p(this.Fp)},i.Yp=function(i){null!==this.Fp&&this.Fp.jo().v(this),this.Fp=i,null!==this.Fp&&this.Fp.jo().l(t.prototype.Wp.bind(this),this,!0),this.qp()},i.Gf=function(){return this.zp},i.up=function(){return this.Up},i.qp=function(){if(null!==this.Fp&&(this.Xp(),0!==this.$i().bt().length)){if(null!==this.Pp){var t=this.Fp.Oo();this.Pp.Zi(p(t))}if(null!==this.Dp){var i=this.Fp.Ro();this.Dp.Zi(p(i))}}},i.Kp=function(){null!==this.Pp&&this.Pp.wt(),null!==this.Dp&&this.Dp.wt()},i.So=function(){return null!==this.Fp?this.Fp.So():0},i.yo=function(t){this.Fp&&this.Fp.yo(t)},i.Wd=function(t){if(this.Fp){this.Zp();var i=t.xf,n=t.Cf;this.Gp(i,n)}},i.hf=function(t){this.Zp(),this.Jp(),this.Gp(t.xf,t.Cf)},i.jd=function(t){if(this.Fp){this.Zp();var i=t.xf,n=t.Cf;this.Gp(i,n);var s=this.Pr(i,n);this.$i().Qu(s&&{tc:s.tc,Qp:s.Qp})}},i.if=function(t){null!==this.Fp&&(this.Zp(),this.tv(t))},i.Zd=function(t){this.Zp(),this.iv(t),this.Gp(t.xf,t.Cf)},i.tf=function(t){null!==this.Fp&&(this.Zp(),this.Ep=!1,this.sv(t))},i.Qd=function(t){null!==this.Fp&&this.tv(t)},i.wf=function(t){if(this.Ep=!0,null===this.Bp){var i={x:t.xf,y:t.Cf};this.nv(i,i)}},i.mf=function(t){null!==this.Fp&&(this.Zp(),this.Fp.Ut().Qu(null),this.ev())},i.rv=function(){return this.Ap},i.uf=function(){this.Np=1,this.hv()},i.cf=function(t,i){if(this.zp.F().handleScale.pinch){var n=5*(i-this.Np);this.Np=i,this.$i()._c(t.nt,n)}},i.ef=function(t){if(this.Ep=!1,this.Vp=null!==this.Bp,this.Jp(),null!==this.Bp){var i=this.$i().rc();this.Ip={x:i.Zt(),y:i.Gt()},this.Bp={x:t.xf,y:t.Cf}}},i.Xd=function(t){if(null!==this.Fp){var i=t.xf,n=t.Cf;if(null===this.Bp)this.iv(t);else{this.Vp=!1;var s=p(this.Ip),e=s.x+(i-this.Bp.x),h=s.y+(n-this.Bp.y);this.Gp(e,h)}}},i.Jd=function(t){0===this.Gf().F().trackingMode.exitMode&&(this.Vp=!0),this.lv(),this.sv(t)},i.Pr=function(t,i){var n=this.Fp;if(null===n)return null;for(var e,h=n.qa(),r=(0,s.Z)(h);!(e=r()).done;){var o=e.value,u=this.av(o.Ps(n),t,i);if(null!==u)return{tc:o,Ef:u.Ef,Qp:u.Qp}}return null},i.ov=function(t,i){p("left"===i?this.Pp:this.Dp).mp(new Cn(t,this.$f.Lt))},i._v=function(){return this.$f},i.mp=function(t){if(t.It<0||t.Lt<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.$f.Gr(t)||(this.$f=t,this.Xf=!0,this.ip.resizeCanvas({width:t.It,height:t.Lt}),this.sp.resizeCanvas({width:t.It,height:t.Lt}),this.Xf=!1,this.jp.style.width=t.It+"px",this.jp.style.height=t.Lt+"px")},i.uv=function(){var t=p(this.Fp);t.Do(t.Oo()),t.Do(t.Ro());for(var i,n=(0,s.Z)(t.Vl());!(i=n()).done;){var e=i.value;if(t.He(e)){var h=e.Dt();null!==h&&t.Do(h),e.Rs()}}},i.Cp=function(){return this.ip.canvas},i.gp=function(t){if(0!==t&&null!==this.Fp){if(t>1&&this.uv(),null!==this.Pp&&this.Pp.gp(t),null!==this.Dp&&this.Dp.gp(t),1!==t){var i=xn(this.ip.canvas);i.save(),this.Sp(i,this.ip.pixelRatio),this.Fp&&(this.cv(i,this.ip.pixelRatio),this.dv(i,this.ip.pixelRatio),this.fv(i,this.ip.pixelRatio,Wn),this.fv(i,this.ip.pixelRatio,An)),i.restore()}var n=xn(this.sp.canvas);n.clearRect(0,0,Math.ceil(this.$f.It*this.sp.pixelRatio),Math.ceil(this.$f.Lt*this.sp.pixelRatio)),this.fv(n,this.ip.pixelRatio,Gn),this.pv(n,this.sp.pixelRatio)}},i.vv=function(){return this.Pp},i.mv=function(){return this.Dp},i.Wp=function(){null!==this.Fp&&this.Fp.jo().v(this),this.Fp=null},i.tv=function(t){var i=t.xf,n=t.Cf;this.Ap.g()&&this.Ap.m(this.$i().yt().J_(i),{x:i,y:n})},i.Sp=function(t,i){var n=this;X(t,i,(function(){var i=n.$i(),s=i.U(),e=i.Tc();s===e?J(t,0,0,n.$f.It,n.$f.Lt,e):Y(t,0,0,n.$f.It,n.$f.Lt,s,e)}))},i.cv=function(t,i){var n=p(this.Fp),s=n.$o().bh().gt(n.Kt(),n.Xt());null!==s&&(t.save(),s.X(t,i,!1),t.restore())},i.dv=function(t,i){var n=this.$i().ec();this.wv(t,i,Wn,Zn,n),this.wv(t,i,Wn,jn,n)},i.pv=function(t,i){this.wv(t,i,Wn,jn,this.$i().rc())},i.fv=function(t,i,n){for(var e,h=p(this.Fp).qa(),r=(0,s.Z)(h);!(e=r()).done;){var o=e.value;this.wv(t,i,n,Zn,o)}for(var u,a=(0,s.Z)(h);!(u=a()).done;){var l=u.value;this.wv(t,i,n,jn,l)}},i.wv=function(t,i,n,e,h){for(var r,o=p(this.Fp),u=n(h,o),a=o.Kt(),l=o.Xt(),f=o.Ut().Ju(),c=null!==f&&f.tc===h,v=null!==f&&c&&void 0!==f.Qp?f.Qp.Dr:void 0,d=(0,s.Z)(u);!(r=d()).done;){var m=r.value.gt(a,l);null!==m&&(t.save(),e(m,t,i,c,v),t.restore())}},i.av=function(t,i,n){for(var e,h=(0,s.Z)(t);!(e=h()).done;){var r=e.value,o=r.gt(this.$f.Lt,this.$f.It);if(null!==o&&o.Pr){var u=o.Pr(i,n);if(null!==u)return{Ef:r,Qp:u}}}return null},i.Xp=function(){if(null!==this.Fp){var t=this.zp,i=this.Fp.Oo().F().visible,n=this.Fp.Ro().F().visible;i||null===this.Pp||(this.$p.removeChild(this.Pp.up()),this.Pp.M(),this.Pp=null),n||null===this.Dp||(this.Hp.removeChild(this.Dp.up()),this.Dp.M(),this.Dp=null);var s=t.Ut().Mc();i&&null===this.Pp&&(this.Pp=new zn(this,t.F().layout,s,"left"),this.$p.appendChild(this.Pp.up())),n&&null===this.Dp&&(this.Dp=new zn(this,t.F().layout,s,"right"),this.Hp.appendChild(this.Dp.up()))}},i.bv=function(t){return t.Rf&&this.Ep||null!==this.Bp},i.gv=function(t){return Math.max(0,Math.min(t,this.$f.It-1))},i.Mv=function(t){return Math.max(0,Math.min(t,this.$f.Lt-1))},i.Gp=function(t,i){this.$i().wc(this.gv(t),this.Mv(i),p(this.Fp))},i.ev=function(){this.$i().bc()},i.lv=function(){this.Vp&&(this.Bp=null,this.ev())},i.nv=function(t,i){this.Bp=t,this.Vp=!1,this.Gp(i.x,i.y);var n=this.$i().rc();this.Ip={x:n.Zt(),y:n.Gt()}},i.$i=function(){return this.zp.Ut()},i.Sv=function(){var t=this.$i(),i=this.bp(),n=i.fs();t.Io(i,n),t.fc(),this.Op=null,this.Rp=!1},i.sv=function(t){var i=this;if(this.Rp){var n=performance.now();if(null!==this.Lp&&this.Lp.nr(t.xf,n),null===this.Lp||this.Lp.$c(n))this.Sv();else{var s=this.$i(),e=s.yt(),h=this.Lp;requestAnimationFrame((function t(){if(!h.Uc()){var n=performance.now(),r=h.$c(n);if(!h.Uc()){var o=e.su();s.dc(h.jc(n)),o===e.su()&&(r=!0,i.Lp=null)}r?i.Sv():requestAnimationFrame(t)}}))}}},i.Zp=function(){this.Bp=null},i.Jp=function(){if(this.Fp){if(this.hv(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)p(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.Fp.fs().Fi()&&this.$i().yt().Fi()}},i.iv=function(t){if(null!==this.Fp){var i=this.$i();if(!i.yt().Fi()){var n=this.zp.F(),s=n.handleScroll,e=n.kineticScroll;if(s.pressedMouseMove&&!t.Rf||(s.horzTouchDrag||s.vertTouchDrag)&&t.Rf){var h=this.Fp.fs(),r=performance.now();null!==this.Op||this.bv(t)||(this.Op={x:t.bf,y:t.gf,e_:r,xf:t.xf,Cf:t.Cf}),null!==this.Lp&&this.Lp.Wc(t.xf,r),null===this.Op||this.Rp||this.Op.x===t.bf&&this.Op.y===t.gf||(null===this.Lp&&(t.Rf&&e.touch||!t.Rf&&e.mouse)&&(this.Lp=new Tn(.2,7,.997,15),this.Lp.Wc(this.Op.xf,this.Op.e_),this.Lp.Wc(t.xf,r)),h.Fi()||i.Bo(this.Fp,h,t.Cf),i.cc(t.xf),this.Rp=!0),this.Rp&&(h.Fi()||i.Vo(this.Fp,h,t.Cf),i.dc(t.xf))}}}},i.hv=function(){var t=performance.now(),i=null===this.Lp||this.Lp.$c(t);null!==this.Lp&&(i||this.Sv()),null!==this.Lp&&(this.Lp.qc(),this.Lp=null)},t}(),Jn=function(){function t(t,i,n,s,e){var h=this;this.ft=!0,this.$f=new Cn(0,0),this.Kf=function(){return h.gp(3)},this.Qf="left"===t,this.$u=n.Mc,this.us=i,this.yv=s,this.kv=e,this.tp=document.createElement("div"),this.tp.style.width="25px",this.tp.style.height="100%",this.tp.style.overflow="hidden",this.ip=Fn(this.tp,new Cn(16,16)),this.ip.subscribeCanvasConfigured(this.Kf)}var i=t.prototype;return i.M=function(){this.ip.unsubscribeCanvasConfigured(this.Kf),this.ip.destroy()},i.up=function(){return this.tp},i._v=function(){return this.$f},i.mp=function(t){if(t.It<0||t.Lt<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.$f.Gr(t)||(this.$f=t,this.ip.resizeCanvas({width:t.It,height:t.Lt}),this.tp.style.width=t.It+"px",this.tp.style.minWidth=t.It+"px",this.tp.style.height=t.Lt+"px",this.ft=!0)},i.gp=function(t){if((!(t<3)||this.ft)&&0!==this.$f.It&&0!==this.$f.Lt){this.ft=!1;var i=xn(this.ip.canvas);this.Sp(i,this.ip.pixelRatio),this.fe(i,this.ip.pixelRatio)}},i.Cp=function(){return this.ip.canvas},i.fe=function(t,i){if(this.yv()){var n=this.$f.It;t.save(),t.fillStyle=this.us.timeScale.borderColor;var s=Math.floor(this.$u.F().k*i),e=this.Qf?Math.round(n*i)-s:0;t.fillRect(e,0,s,s),t.restore()}},i.Sp=function(t,i){var n=this;X(t,i,(function(){J(t,0,0,n.$f.It,n.$f.Lt,n.kv())}))},t}();function Kn(t,i){return t.d_>i.d_?t:i}var Qn=function(){function t(t){var i=this;this.xv=null,this.Cv=null,this.S=null,this.Tv=!1,this.$f=new Cn(0,0),this.Pv=new S,this.Uf=new Kt(5),this.Xf=!1,this.Kf=function(){i.Xf||i.zp.Ut().wh()},this.Jf=function(){i.Xf||i.zp.Ut().wh()},this.zp=t,this.us=t.F().layout,this.Dv=document.createElement("tr"),this.Ov=document.createElement("td"),this.Ov.style.padding="0",this.Rv=document.createElement("td"),this.Rv.style.padding="0",this.tp=document.createElement("td"),this.tp.style.height="25px",this.tp.style.padding="0",this.Av=document.createElement("div"),this.Av.style.width="100%",this.Av.style.height="100%",this.Av.style.position="relative",this.Av.style.overflow="hidden",this.tp.appendChild(this.Av),this.ip=Fn(this.Av,new Cn(16,16)),this.ip.subscribeCanvasConfigured(this.Kf);var n=this.ip.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.sp=Fn(this.Av,new Cn(16,16)),this.sp.subscribeCanvasConfigured(this.Jf);var s=this.sp.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Dv.appendChild(this.Ov),this.Dv.appendChild(this.tp),this.Dv.appendChild(this.Rv),this.Nv(),this.zp.Ut().Mo().l(this.Nv.bind(this),this),this._p=new kn(this.sp.canvas,this,{qd:function(){return!0},Yd:function(){return!1}})}var i=t.prototype;return i.M=function(){this._p.M(),null!==this.xv&&this.xv.M(),null!==this.Cv&&this.Cv.M(),this.sp.unsubscribeCanvasConfigured(this.Jf),this.sp.destroy(),this.ip.unsubscribeCanvasConfigured(this.Kf),this.ip.destroy()},i.up=function(){return this.Dv},i.Ev=function(){return this.xv},i.Bv=function(){return this.Cv},i.hf=function(t){if(!this.Tv){this.Tv=!0;var i=this.zp.Ut();!i.yt().Fi()&&this.zp.F().handleScale.axisPressedMouseMove.time&&i.oc(t.xf)}},i.ef=function(t){this.hf(t)},i.lf=function(){var t=this.zp.Ut();!t.yt().Fi()&&this.Tv&&(this.Tv=!1,this.zp.F().handleScale.axisPressedMouseMove.time&&t.mc())},i.Zd=function(t){var i=this.zp.Ut();!i.yt().Fi()&&this.zp.F().handleScale.axisPressedMouseMove.time&&i.vc(t.xf)},i.Xd=function(t){this.Zd(t)},i.tf=function(){this.Tv=!1;var t=this.zp.Ut();t.yt().Fi()&&!this.zp.F().handleScale.axisPressedMouseMove.time||t.mc()},i.Jd=function(){this.tf()},i.Ed=function(){this.zp.F().handleScale.axisDoubleClickReset&&this.zp.Ut().Ys()},i.Od=function(){this.Ed()},i.Wd=function(){this.zp.Ut().F().handleScale.axisPressedMouseMove.time&&this.Tp(1)},i.mf=function(){this.Tp(0)},i._v=function(){return this.$f},i.Vv=function(){return this.Pv},i.Iv=function(t,i,n){this.$f&&this.$f.Gr(t)||(this.$f=t,this.Xf=!0,this.ip.resizeCanvas({width:t.It,height:t.Lt}),this.sp.resizeCanvas({width:t.It,height:t.Lt}),this.Xf=!1,this.tp.style.width=t.It+"px",this.tp.style.height=t.Lt+"px",this.Pv.m(t)),null!==this.xv&&this.xv.mp(new Cn(i,t.Lt)),null!==this.Cv&&this.Cv.mp(new Cn(n,t.Lt))},i.Lv=function(){var t=this.Fv();return Math.ceil(t.k+t.C+t.T+t.V+t.A+t.zv)},i.wt=function(){this.zp.Ut().yt().ql()},i.Cp=function(){return this.ip.canvas},i.gp=function(t){if(0!==t){if(1!==t){var i=xn(this.ip.canvas);this.Sp(i,this.ip.pixelRatio),this.fe(i,this.ip.pixelRatio),this.yp(i,this.ip.pixelRatio),null!==this.xv&&this.xv.gp(t),null!==this.Cv&&this.Cv.gp(t)}var n=xn(this.sp.canvas),s=this.sp.pixelRatio;n.clearRect(0,0,Math.ceil(this.$f.It*s),Math.ceil(this.$f.Lt*s)),this.Wv([this.zp.Ut().rc()],n,s)}},i.Sp=function(t,i){var n=this;X(t,i,(function(){J(t,0,0,n.$f.It,n.$f.Lt,n.zp.Ut().Tc())}))},i.fe=function(t,i){if(this.zp.F().timeScale.borderVisible){t.save(),t.fillStyle=this.jv();var n=Math.max(1,Math.floor(this.Fv().k*i));t.fillRect(0,0,Math.ceil(this.$f.It*i),n),t.restore()}},i.yp=function(t,i){var n=this,e=this.zp.Ut().yt(),h=e.ql();if(h&&0!==h.length){var r=h.reduce(Kn,h[0]).d_;r>30&&r<50&&(r=30),t.save(),t.strokeStyle=this.jv();var o=this.Fv(),u=o.k+o.C+o.V+o.T/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.jv();var a=Math.max(1,Math.floor(i)),l=Math.floor(.5*i),f=e.F();if(f.borderVisible&&f.ticksVisible){t.beginPath();for(var c=Math.round(o.C*i),v=h.length;v--;){var d=Math.round(h[v].Wl*i);t.rect(d-l,0,a,c)}t.fill()}t.fillStyle=this.$(),X(t,i,(function(){t.font=n.$v();for(var i,e=(0,s.Z)(h);!(i=e()).done;){var o=i.value;if(o.d_<r){var a=o.ru?n.Hv(t,o.Wl,o.ra):o.Wl;t.fillText(o.ra,a,u)}}t.font=n.Uv();for(var l,f=(0,s.Z)(h);!(l=f()).done;){var c=l.value;if(c.d_>=r){var v=c.ru?n.Hv(t,c.Wl,c.ra):c.Wl;t.fillText(c.ra,v,u)}}})),t.restore()}},i.Hv=function(t,i,n){var s=this.Uf.Mi(t,n),e=s/2,h=Math.floor(i-e)+.5;return h<0?i+=Math.abs(0-h):h+s>this.$f.It&&(i-=Math.abs(this.$f.It-(h+s))),i},i.Wv=function(t,i,n){for(var e,h=this.Fv(),r=(0,s.Z)(t);!(e=r()).done;)for(var o,u=e.value,a=(0,s.Z)(u.Ji());!(o=a()).done;){var l=o.value;i.save(),l.gt().X(i,h,n),i.restore()}},i.jv=function(){return this.zp.F().timeScale.borderColor},i.$=function(){return this.us.textColor},i.W=function(){return this.us.fontSize},i.$v=function(){return N(this.W(),this.us.fontFamily)},i.Uv=function(){return N(this.W(),this.us.fontFamily,"bold")},i.Fv=function(){null===this.S&&(this.S={k:1,I:NaN,V:NaN,A:NaN,ji:NaN,C:5,T:NaN,P:"",Wi:new Kt,zv:0});var t=this.S,i=this.$v();if(t.P!==i){var n=this.W();t.T=n,t.P=i,t.V=3*n/12,t.A=3*n/12,t.ji=9*n/12,t.I=0,t.zv=4*n/12,t.Wi.Ae()}return this.S},i.Tp=function(t){this.tp.style.cursor=1===t?"ew-resize":"default"},i.Nv=function(){var t=this.zp.Ut(),i=t.F();i.leftPriceScale.visible||null===this.xv||(this.Ov.removeChild(this.xv.up()),this.xv.M(),this.xv=null),i.rightPriceScale.visible||null===this.Cv||(this.Rv.removeChild(this.Cv.up()),this.Cv.M(),this.Cv=null);var n={Mc:this.zp.Ut().Mc()},s=function(){return i.leftPriceScale.borderVisible&&t.yt().F().borderVisible},e=function(){return t.Tc()};i.leftPriceScale.visible&&null===this.xv&&(this.xv=new Jn("left",i,n,s,e),this.Ov.appendChild(this.xv.up())),i.rightPriceScale.visible&&null===this.Cv&&(this.Cv=new Jn("right",i,n,s,e),this.Rv.appendChild(this.Cv.up()))},t}(),qn=function(){function t(t,i){var n;this.qv=[],this.Yv=0,this.aa=0,this.Le=0,this.Xv=0,this.Kv=0,this.Zv=null,this.Gv=!1,this.Ap=new S,this.zu=new S,this.us=i,this.Dv=document.createElement("div"),this.Dv.classList.add("tv-lightweight-charts"),this.Dv.style.overflow="hidden",this.Dv.style.width="100%",this.Dv.style.height="100%",(n=this.Dv).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Jv=document.createElement("table"),this.Jv.setAttribute("cellspacing","0"),this.Dv.appendChild(this.Jv),this.Qv=this.tm.bind(this),this.Dv.addEventListener("wheel",this.Qv,{passive:!1}),this.$i=new bn(this.ju.bind(this),this.us),this.Ut().hc().l(this.im.bind(this),this),this.sm=new Qn(this),this.Jv.appendChild(this.sm.up());var s=this.us.width,e=this.us.height;if(0===s||0===e){var h=t.getBoundingClientRect();0===s&&(s=Math.floor(h.width),s-=s%2),0===e&&(e=Math.floor(h.height),e-=e%2)}this.nm(s,e),this.rm(),t.appendChild(this.Dv),this.hm(),this.$i.yt().pu().l(this.$i.ol.bind(this.$i),this),this.$i.Mo().l(this.$i.ol.bind(this.$i),this)}var i=t.prototype;return i.Ut=function(){return this.$i},i.F=function(){return this.us},i.lm=function(){return this.qv},i.am=function(){return this.sm},i.M=function(){this.Dv.removeEventListener("wheel",this.Qv),0!==this.Yv&&window.cancelAnimationFrame(this.Yv),this.$i.hc().v(this),this.$i.yt().pu().v(this),this.$i.Mo().v(this),this.$i.M();for(var t,i=(0,s.Z)(this.qv);!(t=i()).done;){var n=t.value;this.Jv.removeChild(n.up()),n.rv().v(this),n.M()}this.qv=[],p(this.sm).M(),null!==this.Dv.parentElement&&this.Dv.parentElement.removeChild(this.Dv),this.zu.M(),this.Ap.M()},i.nm=function(t,i,n){if(void 0===n&&(n=!1),this.aa!==i||this.Le!==t){this.aa=i,this.Le=t;var s=i+"px",e=t+"px";p(this.Dv).style.height=s,p(this.Dv).style.width=e,this.Jv.style.height=s,this.Jv.style.width=e,n?this.om(new at(3)):this.$i.ol()}},i.gp=function(t){void 0===t&&(t=new at(3));for(var i=0;i<this.qv.length;i++)this.qv[i].gp(t.$s(i).zs);this.us.timeScale.visible&&this.sm.gp(t.js())},i.mh=function(t){this.$i.mh(t),this.hm();var i=t.width||this.Le,n=t.height||this.aa;this.nm(i,n)},i.rv=function(){return this.Ap},i.hc=function(){return this.zu},i._m=function(){var t=this;null!==this.Zv&&(this.om(this.Zv),this.Zv=null);var i=this.qv[0],n=Sn(document,new Cn(this.Le,this.aa)),s=xn(n),e=En(n);return X(s,e,(function(){var n=0,e=0,h=function(i){for(var h=0;h<t.qv.length;h++){var r=t.qv[h],o=r._v().Lt,u=p("left"===i?r.vv():r.mv()),a=u.Cp();s.drawImage(a,n,e,u.wp(),o),e+=o}};t.um()&&(h("left"),n=p(i.vv()).wp()),e=0;for(var r=0;r<t.qv.length;r++){var o=t.qv[r],u=o._v(),a=o.Cp();s.drawImage(a,n,e,u.It,u.Lt),e+=u.Lt}n+=i._v().It,t.dm()&&(e=0,h("right"));var l=function(i){var h=p("left"===i?t.sm.Ev():t.sm.Bv()),r=h._v(),o=h.Cp();s.drawImage(o,n,e,r.It,r.Lt)};if(t.us.timeScale.visible){n=0,t.um()&&(l("left"),n=p(i.vv()).wp());var f=t.sm._v(),c=t.sm.Cp();s.drawImage(c,n,e,f.It,f.Lt),t.dm()&&(n+=i._v().It,l("right"),s.restore())}})),n},i.fm=function(t){return("left"!==t||this.um())&&("right"!==t||this.dm())?0===this.qv.length?0:p("left"===t?this.qv[0].vv():this.qv[0].mv()).wp():0},i.pm=function(){for(var t,i=0,n=0,e=0,h=(0,s.Z)(this.qv);!(t=h()).done;){var r=t.value;this.um()&&(n=Math.max(n,p(r.vv()).pp())),this.dm()&&(e=Math.max(e,p(r.mv()).pp())),i+=r.So()}var o=this.Le,u=this.aa,a=Math.max(o-n-e,0),l=this.us.timeScale.visible,f=l?this.sm.Lv():0;f%2&&(f+=1);for(var c=0+f,v=u<c?0:u-c,d=v/i,m=0,g=0;g<this.qv.length;++g){var w=this.qv[g];w.Yp(this.$i.nc()[g]);var b,y;y=g===this.qv.length-1?v-m:Math.round(w.So()*d),m+=b=Math.max(y,2),w.mp(new Cn(a,b)),this.um()&&w.ov(n,"left"),this.dm()&&w.ov(e,"right"),w.bp()&&this.$i.lc(w.bp(),b)}this.sm.Iv(new Cn(l?a:0,f),l?n:0,l?e:0),this.$i.ko(a),this.Xv!==n&&(this.Xv=n),this.Kv!==e&&(this.Kv=e)},i.tm=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.us.handleScroll.mouseWheel||0!==n&&this.us.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.us.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),e=t.clientX-this.Dv.getBoundingClientRect().left;this.Ut()._c(e,s)}0!==i&&this.us.handleScroll.mouseWheel&&this.Ut().uc(-80*i)}},i.om=function(t){var i,n=t.js();3===n&&this.vm(),3!==n&&2!==n||(this.wm(t),this.bm(t),this.sm.wt(),this.qv.forEach((function(t){t.Kp()})),3===(null===(i=this.Zv)||void 0===i?void 0:i.js())&&(this.Zv.Gs(t),this.vm(),this.wm(this.Zv),this.bm(this.Zv),t=this.Zv,this.Zv=null)),this.gp(t)},i.bm=function(t){for(var i,n=t.Zs(),e=(0,s.Z)(n);!(i=e()).done;){var h=i.value;this.Js(h)}},i.wm=function(t){for(var i=this.$i.nc(),n=0;n<i.length;n++)t.$s(n).Ws&&i[n].zo()},i.Js=function(t){var i=this.$i.yt();switch(t.Us){case 0:i.mu();break;case 1:i.wu(t.Ot);break;case 2:i.Xs(t.Ot);break;case 3:i.Ks(t.Ot);break;case 4:i.hu()}},i.ju=function(t){var i=this;null!==this.Zv?this.Zv.Gs(t):this.Zv=t,this.Gv||(this.Gv=!0,this.Yv=window.requestAnimationFrame((function(){if(i.Gv=!1,i.Yv=0,null!==i.Zv){var t=i.Zv;i.Zv=null,i.om(t)}})))},i.vm=function(){this.rm()},i.rm=function(){for(var t=this.$i.nc(),i=t.length,n=this.qv.length,s=i;s<n;s++){var e=d(this.qv.pop());this.Jv.removeChild(e.up()),e.rv().v(this),e.M()}for(var h=n;h<i;h++){var r=new Xn(this,t[h]);r.rv().l(this.gm.bind(this),this),this.qv.push(r),this.Jv.insertBefore(r.up(),this.sm.up())}for(var o=0;o<i;o++){var u=t[o],a=this.qv[o];a.bp()!==u?a.Yp(u):a.qp()}this.hm(),this.pm()},i.Mm=function(t,i){var n,s,e=new Map;if(null!==t&&this.$i.bt().forEach((function(i){var n=i.Bs().Lh(t);null!==n&&e.set(i,n)})),null!==t){var h=null===(n=this.$i.yt().Hi(t))||void 0===n?void 0:n.f_;void 0!==h&&(s=h)}var r=this.Ut().Ju(),o=null!==r&&r.tc instanceof Ti?r.tc:void 0,u=null!==r&&void 0!==r.Qp?r.Qp.Rr:void 0;return{ot:s,Fn:null!=t?t:void 0,Sm:null!=i?i:void 0,ym:o,km:e,xm:u}},i.gm=function(t,i){var n=this;this.Ap.m((function(){return n.Mm(t,i)}))},i.im=function(t,i){var n=this;this.zu.m((function(){return n.Mm(t,i)}))},i.hm=function(){var t=this.us.timeScale.visible?"":"none";this.sm.up().style.display=t},i.um=function(){return this.qv[0].bp().Oo().F().visible},i.dm=function(){return this.qv[0].bp().Ro().F().visible},t}();function Yn(t,i,n,s){var e=n.value;return{Fn:i,ot:t,Ot:[e,e,e,e],f_:s}}function Hn(t,i,n,s){var e=n.value,h={Fn:i,ot:t,Ot:[e,e,e,e],f_:s};return"color"in n&&void 0!==n.color&&(h.O=n.color),h}function ts(t){return void 0!==t.Ot}function is(t){return function(i,n,s,e){return void 0===(h=s).open&&void 0===h.value?{ot:i,Fn:n,f_:e}:t(i,n,s,e);var h}}var ns={Candlestick:is((function(t,i,n,s){var e={Fn:i,ot:t,Ot:[n.open,n.high,n.low,n.close],f_:s};return"color"in n&&void 0!==n.color&&(e.O=n.color),"borderColor"in n&&void 0!==n.borderColor&&(e.Rt=n.borderColor),"wickColor"in n&&void 0!==n.wickColor&&(e.me=n.wickColor),e})),Bar:is((function(t,i,n,s){var e={Fn:i,ot:t,Ot:[n.open,n.high,n.low,n.close],f_:s};return"color"in n&&void 0!==n.color&&(e.O=n.color),e})),Area:is(Yn),Baseline:is(Yn),Histogram:is(Hn),Line:is(Hn)};function ss(t){return ns[t]}function es(t){return 60*t*60*1e3}function hs(t){return 60*t*1e3}var rs=[{Cm:(1,1e3),d_:10},{Cm:hs(1),d_:20},{Cm:hs(5),d_:21},{Cm:hs(30),d_:22},{Cm:es(1),d_:30},{Cm:es(3),d_:31},{Cm:es(6),d_:32},{Cm:es(12),d_:33}];function os(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=rs.length-1;n>=0;--n)if(Math.floor(i.getTime()/rs[n].Cm)!==Math.floor(t.getTime()/rs[n].Cm))return rs[n].d_;return 0}function us(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].ot.e_,s=null!==n?new Date(1e3*n):null,e=0,h=i;h<t.length;++h){var r=t[h],o=new Date(1e3*r.ot.e_);null!==s&&(r.c_=os(o,s)),e+=r.ot.e_-(n||r.ot.e_),n=r.ot.e_,s=o}if(0===i&&t.length>1){var u=Math.ceil(e/(t.length-1)),a=new Date(1e3*(t[0].ot.e_-u));t[0].c_=os(new Date(1e3*t[0].ot.e_),a)}}}function as(t){if(!Mn(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{e_:Math.round(i.getTime()/1e3),n_:t}}function ls(t){if(!_n(t))throw new Error("time must be of type isUTCTimestamp");return{e_:t}}function fs(t){return 0===t.length?null:Mn(t[0].time)?as:ls}function cs(t){return _n(t)?ls(t):Mn(t)?as(t):as(vs(t))}function vs(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function ds(t){T(t.time)&&(t.time=vs(t.time))}function ps(t){return{Fn:0,Tm:new Map,gl:t}}function ms(t){if(void 0!==t&&0!==t.length)return{Pm:t[0].ot.e_,Dm:t[t.length-1].ot.e_}}function gs(t){var i;return t.forEach((function(t){void 0===i&&(i=t.f_)})),d(i)}function ws(t){void 0===t.f_&&(t.f_=t.time)}var bs=function(){function t(){this.Om=new Map,this.Rm=new Map,this.Am=new Map,this.Nm=[]}var i=t.prototype;return i.M=function(){this.Om.clear(),this.Rm.clear(),this.Am.clear(),this.Nm=[]},i.Em=function(t,i){var n=this,e=0!==this.Om.size,h=!1,r=this.Rm.get(t);if(void 0!==r)if(1===this.Rm.size)e=!1,h=!0,this.Om.clear();else for(var o,u=(0,s.Z)(this.Nm);!(o=u()).done;){o.value.pointData.Tm.delete(t)&&(h=!0)}var a=[];if(0!==i.length){var l=i;l.forEach((function(t){return ws(t)})),function(t){t.forEach(ds)}(i);var f=p(fs(i)),c=ss(t.Sh());a=l.map((function(i){var s=f(i.time),e=n.Om.get(s.e_);void 0===e&&(e=ps(s),n.Om.set(s.e_,e),h=!0);var r=c(s,e.Fn,i,i.f_);return e.Tm.set(t,r),r}))}e&&this.Bm(),this.Vm(t,a);var v=-1;if(h){var d=[];this.Om.forEach((function(t){d.push({c_:0,ot:t.gl,pointData:t,f_:gs(t.Tm)})})),d.sort((function(t,i){return t.ot.e_-i.ot.e_})),v=this.Im(d)}return this.Lm(t,v,function(t,i){var n=ms(t),s=ms(i);if(void 0!==n&&void 0!==s)return{dl:n.Dm>=s.Dm&&n.Pm>=s.Pm}}(this.Rm.get(t),r))},i.kc=function(t){return this.Em(t,[])},i.Fm=function(t,i){var n=i;ws(n),ds(i);var s=p(fs([i]))(i.time),e=this.Am.get(t);if(void 0!==e&&s.e_<e.e_)throw new Error("Cannot update oldest data, last time="+e.e_+", new time="+s.e_);var h=this.Om.get(s.e_),r=void 0===h;void 0===h&&(h=ps(s),this.Om.set(s.e_,h));var o=ss(t.Sh())(s,h.Fn,i,n.f_);h.Tm.set(t,o),this.zm(t,o);var u={dl:ts(o)};if(!r)return this.Lm(t,-1,u);var a={c_:0,ot:h.gl,pointData:h,f_:gs(h.Tm)},l=_t(this.Nm,a.ot.e_,(function(t,i){return t.ot.e_<i}));this.Nm.splice(l,0,a);for(var f=l;f<this.Nm.length;++f)ys(this.Nm[f].pointData,f);return us(this.Nm,l),this.Lm(t,l,u)},i.zm=function(t,i){var n=this.Rm.get(t);void 0===n&&(n=[],this.Rm.set(t,n));var s=0!==n.length?n[n.length-1]:null;null===s||i.ot.e_>s.ot.e_?ts(i)&&n.push(i):ts(i)?n[n.length-1]=i:n.splice(-1,1),this.Am.set(t,i.ot)},i.Vm=function(t,i){0!==i.length?(this.Rm.set(t,i.filter(ts)),this.Am.set(t,i[i.length-1].ot)):(this.Rm.delete(t),this.Am.delete(t))},i.Bm=function(){for(var t,i=(0,s.Z)(this.Nm);!(t=i()).done;){var n=t.value;0===n.pointData.Tm.size&&this.Om.delete(n.ot.e_)}},i.Im=function(t){for(var i=-1,n=0;n<this.Nm.length&&n<t.length;++n){var s=this.Nm[n],e=t[n];if(s.ot.e_!==e.ot.e_){i=n;break}e.c_=s.c_,ys(e.pointData,n)}if(-1===i&&this.Nm.length!==t.length&&(i=Math.min(this.Nm.length,t.length)),-1===i)return-1;for(var h=i;h<t.length;++h)ys(t[h].pointData,h);return us(t,i),this.Nm=t,i},i.Wm=function(){if(0===this.Rm.size)return null;var t=0;return this.Rm.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Fn))})),t},i.Lm=function(t,i,n){var s={jm:new Map,yt:{G_:this.Wm()}};if(-1!==i)this.Rm.forEach((function(i,e){s.jm.set(e,{Je:i,$m:e===t?n:void 0})})),this.Rm.has(t)||s.jm.set(t,{Je:[],$m:n}),s.yt.Hm=this.Nm,s.yt.Um=i;else{var e=this.Rm.get(t);s.jm.set(t,{Je:e||[],$m:n})}return s},t}();function ys(t,i){t.Fn=i,t.Tm.forEach((function(t){t.Fn=i}))}function Ms(t){return{value:t.Ot[3],time:t.f_}}function _s(t){var i=Ms(t);return void 0!==t.O&&(i.color=t.O),i}function Cs(t){return{open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.f_}}var Es={Area:Ms,Line:_s,Baseline:Ms,Histogram:_s,Bar:function(t){var i=Cs(t);return void 0!==t.O&&(i.color=t.O),i},Candlestick:function(t){var i=Cs(t),n=t.O,s=t.Rt,e=t.me;return void 0!==n&&(i.color=n),void 0!==s&&(i.borderColor=s),void 0!==e&&(i.wickColor=e),i}};function xs(t){return Es[t]}var Ss={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},Fs=function(){function t(t){this._h=t}var i=t.prototype;return i.applyOptions=function(t){this._h.mh(t)},i.options=function(){return this._h.F()},i.qm=function(){return this._h},t}(),Ls=function(){function t(t,i,n){this.Sn=t,this.Ym=i,this.Xm=n}var i=t.prototype;return i.priceFormatter=function(){return this.Sn.Tl()},i.priceToCoordinate=function(t){var i=this.Sn.Ct();return null===i?null:this.Sn.Dt().Pt(t,i.Ot)},i.coordinateToPrice=function(t){var i=this.Sn.Ct();return null===i?null:this.Sn.Dt().ps(t,i.Ot)},i.barsInLogicalRange=function(t){if(null===t)return null;var i=new dn(new rn(t.from,t.to)).b_(),n=this.Sn.Bs();if(n.Fi())return null;var s=n.Lh(i.pn(),1),e=n.Lh(i.vn(),-1),h=p(n.Bh()),r=p(n.Es());if(null!==s&&null!==e&&s.Fn>e.Fn)return{barsBefore:t.from-h,barsAfter:r-t.to};var o={barsBefore:null===s||s.Fn===h?t.from-h:s.Fn-h,barsAfter:null===e||e.Fn===r?r-t.to:r-e.Fn};return null!==s&&null!==e&&(o.from=s.ot.n_||s.ot.e_,o.to=e.ot.n_||e.ot.e_),o},i.setData=function(t){this.Sn.Sh(),this.Ym.Km(this.Sn,t)},i.update=function(t){this.Sn.Sh(),this.Ym.Zm(this.Sn,t)},i.dataByIndex=function(t,i){var n=this.Sn.Bs().Lh(t,i);return null===n?null:xs(this.seriesType())(n)},i.setMarkers=function(t){var i=t.map((function(t){return Object.assign(Object.assign({},t),{originalTime:t.time,time:cs(t.time)})}));this.Sn.pl(i)},i.markers=function(){return this.Sn.vl().map((function(t){var i=t.originalTime,n=(t.time,function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(s=Object.getOwnPropertySymbols(t);e<s.length;e++)i.indexOf(s[e])<0&&Object.prototype.propertyIsEnumerable.call(t,s[e])&&(n[s[e]]=t[s[e]])}return n}(t,["originalTime","time"]));return Object.assign({time:i},n)}))},i.applyOptions=function(t){this.Sn.mh(t)},i.options=function(){return I(this.Sn.F())},i.priceScale=function(){return this.Xm.priceScale(this.Sn.Dt().Al())},i.createPriceLine=function(t){var i=F(I(Ss),t),n=this.Sn.ml(i);return new Fs(n)},i.removePriceLine=function(t){this.Sn.wl(t.qm())},i.seriesType=function(){return this.Sn.Sh()},t}(),Os=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.applyOptions=function(i){yn(i),t.prototype.applyOptions.call(this,i)},i}(Ls),Ts={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2}},Rs={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:$,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Is={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:$},crosshair:{vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:Object.assign({},Ts),leftPriceScale:Object.assign(Object.assign({},Ts),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Ts),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!1},watermark:Rs,localization:{locale:Rn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Ds={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},ks={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},$s={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ns={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ps={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Vs={color:"#26a69a",base:0},Bs={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Us=function(){function t(t,i){this.Gm=t,this.Jm=i}var i=t.prototype;return i.applyOptions=function(t){this.Gm.Ut().ic(this.Jm,t)},i.options=function(){return this.Ii().F()},i.width=function(){return ut(this.Jm)?this.Gm.fm(this.Jm):0},i.Ii=function(){return p(this.Gm.Ut().sc(this.Jm)).Dt},t}(),zs=function(){function t(t,i){this.Qm=new S,this.D_=new S,this.Pv=new S,this.$i=t,this.co=t.yt(),this.sm=i,this.co.du().l(this.tw.bind(this)),this.co.fu().l(this.iw.bind(this)),this.sm.Vv().l(this.sw.bind(this))}var i=t.prototype;return i.M=function(){this.co.du().v(this),this.co.fu().v(this),this.sm.Vv().v(this),this.Qm.M(),this.D_.M(),this.Pv.M()},i.scrollPosition=function(){return this.co.su()},i.scrollToPosition=function(t,i){i?this.co.cu(t,1e3):this.$i.Ks(t)},i.scrollToRealTime=function(){this.co.uu()},i.getVisibleRange=function(){var t,i,n=this.co.H_();return null===n?null:{from:null!==(t=n.from.n_)&&void 0!==t?t:n.from.e_,to:null!==(i=n.to.n_)&&void 0!==i?i:n.to.e_}},i.setVisibleRange=function(t){var i={from:cs(t.from),to:cs(t.to)},n=this.co.X_(i);this.$i.xc(n)},i.getVisibleLogicalRange=function(){var t=this.co.j_();return null===t?null:{from:t.pn(),to:t.vn()}},i.setVisibleLogicalRange=function(t){v(t.from<=t.to,"The from index cannot be after the to index."),this.$i.xc(t)},i.resetTimeScale=function(){this.$i.Ys()},i.fitContent=function(){this.$i.mu()},i.logicalToCoordinate=function(t){var i=this.$i.yt();return i.Fi()?null:i.Nt(t)},i.coordinateToLogical=function(t){return this.co.Fi()?null:this.co.J_(t)},i.timeToCoordinate=function(t){var i=cs(t),n=this.co.El(i,!1);return null===n?null:this.co.Nt(n)},i.coordinateToTime=function(t){var i,n=this.$i.yt(),s=n.J_(t),e=n.vs(s);return null===e?null:null!==(i=e.n_)&&void 0!==i?i:e.e_},i.width=function(){return this.sm._v().It},i.height=function(){return this.sm._v().Lt},i.subscribeVisibleTimeRangeChange=function(t){this.Qm.l(t)},i.unsubscribeVisibleTimeRangeChange=function(t){this.Qm.p(t)},i.subscribeVisibleLogicalRangeChange=function(t){this.D_.l(t)},i.unsubscribeVisibleLogicalRangeChange=function(t){this.D_.p(t)},i.subscribeSizeChange=function(t){this.Pv.l(t)},i.unsubscribeSizeChange=function(t){this.Pv.p(t)},i.applyOptions=function(t){this.co.mh(t)},i.options=function(){return I(this.co.F())},i.tw=function(){this.Qm.g()&&this.Qm.m(this.getVisibleRange())},i.iw=function(){this.D_.g()&&this.D_.m(this.getVisibleLogicalRange())},i.sw=function(t){this.Pv.m(t.It,t.Lt)},t}();function Zs(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function js(t){return function(t){if(R(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&R(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var s=t.handleScroll;R(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}var Ws=function(){function t(t,i){var n=this;this.nw=new bs,this.ew=new Map,this.rw=new Map,this.hw=new S,this.lw=new S;var s=void 0===i?I(Is):F(I(Is),js(i));this.Gm=new qn(t,s),this.Gm.rv().l((function(t){n.hw.g()&&n.hw.m(n.aw(t()))}),this),this.Gm.hc().l((function(t){n.lw.g()&&n.lw.m(n.aw(t()))}),this);var e=this.Gm.Ut();this.ow=new zs(e,this.Gm.am())}var i=t.prototype;return i.remove=function(){this.Gm.rv().v(this),this.Gm.hc().v(this),this.ow.M(),this.Gm.M(),this.ew.clear(),this.rw.clear(),this.hw.M(),this.lw.M(),this.nw.M()},i.resize=function(t,i,n){this.Gm.nm(t,i,n)},i.addAreaSeries=function(t){void 0===t&&(t={}),Zs(t.priceFormat);var i=F(I(Bs),Ns,t),n=this.Gm.Ut().Sc("Area",i),s=new Ls(n,this,this);return this.ew.set(s,n),this.rw.set(n,s),s},i.addBaselineSeries=function(t){void 0===t&&(t={}),Zs(t.priceFormat);var i=F(I(Bs),I(Ps),t),n=this.Gm.Ut().Sc("Baseline",i),s=new Ls(n,this,this);return this.ew.set(s,n),this.rw.set(n,s),s},i.addBarSeries=function(t){void 0===t&&(t={}),Zs(t.priceFormat);var i=F(I(Bs),ks,t),n=this.Gm.Ut().Sc("Bar",i),s=new Ls(n,this,this);return this.ew.set(s,n),this.rw.set(n,s),s},i.addCandlestickSeries=function(t){void 0===t&&(t={}),yn(t),Zs(t.priceFormat);var i=F(I(Bs),Ds,t),n=this.Gm.Ut().Sc("Candlestick",i),s=new Os(n,this,this);return this.ew.set(s,n),this.rw.set(n,s),s},i.addHistogramSeries=function(t){void 0===t&&(t={}),Zs(t.priceFormat);var i=F(I(Bs),Vs,t),n=this.Gm.Ut().Sc("Histogram",i),s=new Ls(n,this,this);return this.ew.set(s,n),this.rw.set(n,s),s},i.addLineSeries=function(t){void 0===t&&(t={}),Zs(t.priceFormat);var i=F(I(Bs),$s,t),n=this.Gm.Ut().Sc("Line",i),s=new Ls(n,this,this);return this.ew.set(s,n),this.rw.set(n,s),s},i.removeSeries=function(t){var i=d(this.ew.get(t)),n=this.nw.kc(i);this.Gm.Ut().kc(i),this._w(n),this.ew.delete(t),this.rw.delete(i)},i.Km=function(t,i){this._w(this.nw.Em(t,i))},i.Zm=function(t,i){this._w(this.nw.Fm(t,i))},i.subscribeClick=function(t){this.hw.l(t)},i.unsubscribeClick=function(t){this.hw.p(t)},i.subscribeCrosshairMove=function(t){this.lw.l(t)},i.unsubscribeCrosshairMove=function(t){this.lw.p(t)},i.priceScale=function(t){return new Us(this.Gm,t)},i.timeScale=function(){return this.ow},i.applyOptions=function(t){this.Gm.mh(js(t))},i.options=function(){return this.Gm.F()},i.takeScreenshot=function(){return this.Gm._m()},i._w=function(t){var i=this.Gm.Ut();i.gc(t.yt.G_,t.yt.Hm,t.yt.Um),t.jm.forEach((function(t,i){return i.tt(t.Je,t.$m)})),i.tu()},i.uw=function(t){return d(this.rw.get(t))},i.aw=function(t){var i=this,n=new Map;t.km.forEach((function(t,s){var e=xs(s.Sh())(t);v(function(t){return void 0!==t.open||void 0!==t.value}(e)),n.set(i.uw(s),e)}));var s=void 0===t.ym?void 0:this.uw(t.ym);return{time:t.ot,logical:t.Fn,point:t.Sm,hoveredSeries:s,hoveredMarkerId:t.xm,seriesData:n}},t}();function As(t,i){var n;if(T(t)){var s=document.getElementById(t);v(null!==s,"Cannot find element in DOM with id="+t),n=s}else n=t;return new Ws(n,i)}function Gs(){return"4.0.0-dev+202206201502"}}}]);